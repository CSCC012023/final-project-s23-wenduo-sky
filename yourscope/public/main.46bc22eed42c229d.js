"use strict";(self.webpackChunkyourscope=self.webpackChunkyourscope||[]).push([[179],{801:()=>{function he(t){return"function"==typeof t}function Ea(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ia=Ea(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function pi(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(he(r))try{r()}catch(o){e=o instanceof Ia?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{wE(o)}catch(s){e=e??[],s instanceof Ia?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ia(e)}}add(e){var n;if(e&&e!==this)if(this.closed)wE(e);else{if(e instanceof Bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pi(n,e)}remove(e){const{_finalizers:n}=this;n&&pi(n,e),e instanceof Bt&&e._removeParent(this)}}Bt.EMPTY=(()=>{const t=new Bt;return t.closed=!0,t})();const EE=Bt.EMPTY;function IE(t){return t instanceof Bt||t&&"closed"in t&&he(t.remove)&&he(t.add)&&he(t.unsubscribe)}function wE(t){he(t)?t():t.unsubscribe()}const Cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},wa={setTimeout(t,e,...n){const{delegate:r}=wa;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=wa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function DE(t){wa.setTimeout(()=>{const{onUnhandledError:e}=Cr;if(!e)throw t;e(t)})}function CE(){}const hP=Hl("C",void 0,void 0);function Hl(t,e,n){return{kind:t,value:e,error:n}}let Tr=null;function Da(t){if(Cr.useDeprecatedSynchronousErrorHandling){const e=!Tr;if(e&&(Tr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Tr;if(Tr=null,n)throw r}}else t()}class $l extends Bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,IE(e)&&e.add(this)):this.destination=EP}static create(e,n,r){return new Mo(e,n,r)}next(e){this.isStopped?Wl(function gP(t){return Hl("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Wl(function pP(t){return Hl("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Wl(hP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _P=Function.prototype.bind;function jl(t,e){return _P.call(t,e)}class yP{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ca(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ca(r)}else Ca(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ca(n)}}}class Mo extends $l{constructor(e,n,r){let i;if(super(),he(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Cr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jl(e.next,o),error:e.error&&jl(e.error,o),complete:e.complete&&jl(e.complete,o)}):i=e}this.destination=new yP(i)}}function Ca(t){Cr.useDeprecatedSynchronousErrorHandling?function mP(t){Cr.useDeprecatedSynchronousErrorHandling&&Tr&&(Tr.errorThrown=!0,Tr.error=t)}(t):DE(t)}function Wl(t,e){const{onStoppedNotification:n}=Cr;n&&wa.setTimeout(()=>n(t,e))}const EP={closed:!0,next:CE,error:function vP(t){throw t},complete:CE},zl="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ta(t){return t}let Ke=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function wP(t){return t&&t instanceof $l||function IP(t){return t&&he(t.next)&&he(t.error)&&he(t.complete)}(t)&&IE(t)}(n)?n:new Mo(n,r,i);return Da(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=bE(r))((i,o)=>{const s=new Mo({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[zl](){return this}pipe(...n){return function TE(t){return 0===t.length?Ta:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=bE(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function bE(t){var e;return null!==(e=t??Cr.Promise)&&void 0!==e?e:Promise}const DP=Ea(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ba=(()=>{class t extends Ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new SE(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new DP}next(n){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?EE:(this.currentObservers=null,o.push(n),new Bt(()=>{this.currentObservers=null,pi(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Ke;return n.source=this,n}}return t.create=(e,n)=>new SE(e,n),t})();class SE extends ba{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:EE}}class CP extends ba{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function br(t){return e=>{if(function TP(t){return he(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function gi(t,e,n,r,i){return new bP(t,e,n,r,i)}class bP extends $l{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Kl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Kn(t){return this instanceof Kn?(this.v=t,this):new Kn(t)}function RE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Ql(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}const PE=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function kE(t){return he(t?.then)}function xE(t){return he(t[zl])}function OE(t){return Symbol.asyncIterator&&he(t?.[Symbol.asyncIterator])}function LE(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const FE=function zP(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function VE(t){return he(t?.[FE])}function BE(t){return function NE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,m){o.push([f,h,p,m])>1||a(f,h)})})}function a(f,h){try{!function c(f){f.value instanceof Kn?Promise.resolve(f.value.v).then(u,l):d(o[0][2],f)}(r[f](h))}catch(p){d(o[0][3],p)}}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Kn(n.read());if(i)return yield Kn(void 0);yield yield Kn(r)}}finally{n.releaseLock()}})}function UE(t){return he(t?.getReader)}function Yn(t){if(t instanceof Ke)return t;if(null!=t){if(xE(t))return function GP(t){return new Ke(e=>{const n=t[zl]();if(he(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(PE(t))return function qP(t){return new Ke(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(kE(t))return function KP(t){return new Ke(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,DE)})}(t);if(OE(t))return HE(t);if(VE(t))return function YP(t){return new Ke(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(UE(t))return function QP(t){return HE(BE(t))}(t)}throw LE(t)}function HE(t){return new Ke(e=>{(function ZP(t,e){var n,r,i,o;return function AE(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=RE(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Qn(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Zl(t,e,n=1/0){return he(e)?Zl((r,i)=>function SP(t,e){return br((n,r)=>{let i=0;n.subscribe(gi(r,o=>{r.next(t.call(e,o,i++))}))})}((o,s)=>e(r,o,i,s))(Yn(t(r,i))),n):("number"==typeof e&&(n=e),br((r,i)=>function JP(t,e,n,r,i,o,s,a){const c=[];let u=0,l=0,d=!1;const f=()=>{d&&!c.length&&!u&&e.complete()},h=m=>u<r?p(m):c.push(m),p=m=>{o&&e.next(m),u++;let y=!1;Yn(n(m,l++)).subscribe(gi(e,v=>{i?.(v),o?h(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){const v=c.shift();s?Qn(e,s,()=>p(v)):p(v)}f()}catch(v){e.error(v)}}))};return t.subscribe(gi(e,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,t,n)))}const $E=new Ke(t=>t.complete());function Jl(t){return t[t.length-1]}function jE(t){return function tk(t){return t&&he(t.schedule)}(Jl(t))?t.pop():void 0}function Sa(t,e=0){return br((n,r)=>{n.subscribe(gi(r,i=>Qn(r,t,()=>r.next(i),e),()=>Qn(r,t,()=>r.complete(),e),i=>Qn(r,t,()=>r.error(i),e)))})}function Aa(t,e=0){return br((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function WE(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ke(n=>{Qn(n,e,()=>{const r=t[Symbol.asyncIterator]();Qn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zE(t,e){return e?function ck(t,e){if(null!=t){if(xE(t))return function rk(t,e){return Yn(t).pipe(Aa(e),Sa(e))}(t,e);if(PE(t))return function ok(t,e){return new Ke(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(kE(t))return function ik(t,e){return Yn(t).pipe(Aa(e),Sa(e))}(t,e);if(OE(t))return WE(t,e);if(VE(t))return function sk(t,e){return new Ke(n=>{let r;return Qn(n,e,()=>{r=t[FE](),Qn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>he(r?.return)&&r.return()})}(t,e);if(UE(t))return function ak(t,e){return WE(BE(t),e)}(t,e)}throw LE(t)}(t,e):Yn(t)}function GE(t={}){const{connector:e=(()=>new ba),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,l=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,l=d=!1},p=()=>{const m=s;h(),m?.unsubscribe()};return br((m,y)=>{u++,!d&&!l&&f();const v=c=c??e();y.add(()=>{u--,0===u&&!d&&!l&&(a=Xl(p,i))}),v.subscribe(y),!s&&u>0&&(s=new Mo({next:_=>v.next(_),error:_=>{d=!0,f(),a=Xl(h,n,_),v.error(_)},complete:()=>{l=!0,f(),a=Xl(h,r),v.complete()}}),Yn(m).subscribe(s))})(o)}}function Xl(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Mo({next:()=>{r.unsubscribe(),t()}});return Yn(e(...n)).subscribe(r)}function fk(t,e){return t===e}function ne(t){for(let e in t)if(t[e]===ne)return e;throw Error("Could not find renamed property on target object.")}function Pe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Pe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function td(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const hk=ne({__forward_ref__:ne});function nd(t){return t.__forward_ref__=nd,t.toString=function(){return Pe(this())},t}function k(t){return function rd(t){return"function"==typeof t&&t.hasOwnProperty(hk)&&t.__forward_ref__===nd}(t)?t():t}function id(t){return t&&!!t.\u0275providers}class b extends Error{constructor(e,n){super(function Ma(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function X(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function x(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Na(t,e){throw new b(-201,!1)}function Rt(t,e){null==t&&function ee(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function re(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ra(t){return KE(t,Pa)||KE(t,QE)}function KE(t,e){return t.hasOwnProperty(e)?t[e]:null}function YE(t){return t&&(t.hasOwnProperty(od)||t.hasOwnProperty(Ek))?t[od]:null}const Pa=ne({\u0275prov:ne}),od=ne({\u0275inj:ne}),QE=ne({ngInjectableDef:ne}),Ek=ne({ngInjectorDef:ne});var P=(()=>((P=P||{})[P.Default=0]="Default",P[P.Host=1]="Host",P[P.Self=2]="Self",P[P.SkipSelf=4]="SkipSelf",P[P.Optional=8]="Optional",P))();let sd;function lt(t){const e=sd;return sd=t,e}function JE(t,e,n){const r=Ra(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&P.Optional?null:void 0!==e?e:void Na(Pe(t))}const oe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),No={},ad="__NG_DI_FLAG__",ka="ngTempTokenPath",wk=/\n/gm,XE="__source";let mi;function Jn(t){const e=mi;return mi=t,e}function Tk(t,e=P.Default){if(void 0===mi)throw new b(-203,!1);return null===mi?JE(t,void 0,e):mi.get(t,e&P.Optional?null:void 0,e)}function q(t,e=P.Default){return(function ZE(){return sd}()||Tk)(k(t),e)}function ue(t,e=P.Default){return q(t,xa(e))}function xa(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function cd(t){const e=[];for(let n=0;n<t.length;n++){const r=k(t[n]);if(Array.isArray(r)){if(0===r.length)throw new b(900,!1);let i,o=P.Default;for(let s=0;s<r.length;s++){const a=r[s],c=bk(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function Ro(t,e){return t[ad]=e,t.prototype[ad]=e,t}function bk(t){return t[ad]}function wn(t){return{toString:t}.toString()}var en=(()=>((en=en||{})[en.OnPush=0]="OnPush",en[en.Default=1]="Default",en))(),Ct=(()=>{return(t=Ct||(Ct={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Ct;var t})();const Dn={},Q=[],Oa=ne({\u0275cmp:ne}),ud=ne({\u0275dir:ne}),ld=ne({\u0275pipe:ne}),tI=ne({\u0275mod:ne}),Cn=ne({\u0275fac:ne}),Po=ne({__NG_ELEMENT_ID__:ne}),nI=ne({__NG_ENV_ID__:ne});function rI(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function dd(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];oI(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function iI(t){return 3===t||4===t||6===t}function oI(t){return 64===t.charCodeAt(0)}function ko(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||sI(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function sI(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const aI="ng-template";function Mk(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==rI(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function cI(t){return 4===t.type&&t.value!==aI}function Nk(t,e,n){return e===(4!==t.type||n?t.value:aI)}function Rk(t,e,n){let r=4;const i=t.attrs||[],o=function xk(t){for(let e=0;e<t.length;e++)if(iI(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!Nk(t,c,n)||""===c&&1===e.length){if(Ut(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!Mk(t.attrs,u,n)){if(Ut(r))return!1;s=!0}continue}const d=Pk(8&r?"class":c,i,cI(t),n);if(-1===d){if(Ut(r))return!1;s=!0;continue}if(""!==u){let f;f=d>o?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==rI(h,u,0)||2&r&&u!==f){if(Ut(r))return!1;s=!0}}}}else{if(!s&&!Ut(r)&&!Ut(c))return!1;if(s&&Ut(c))continue;s=!1,r=c|1&r}}return Ut(r)||s}function Ut(t){return 0==(1&t)}function Pk(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Ok(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function uI(t,e,n=!1){for(let r=0;r<e.length;r++)if(Rk(t,e[r],n))return!0;return!1}function lI(t,e){return t?":not("+e.trim()+")":e}function Fk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Ut(s)&&(e+=lI(o,i),i=""),r=s,o=o||!Ut(r);n++}return""!==i&&(e+=lI(o,i)),e}function dI(t){return wn(()=>{const e=function hI(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||Q,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fI(t.inputs,e),outputs:fI(t.outputs)}}(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===en.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||Ct.Emulated,styles:t.styles||Q,_:null,schemas:t.schemas||null,tView:null,id:""};!function pI(t){t.features?.forEach(e=>e(t))}(n);const r=t.dependencies;return n.directiveDefs=La(r,!1),n.pipeDefs=La(r,!0),n.id=function zk(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Hk(t){return J(t)||Ye(t)}function $k(t){return null!==t}function Tn(t){return wn(()=>({type:t.type,bootstrap:t.bootstrap||Q,declarations:t.declarations||Q,imports:t.imports||Q,exports:t.exports||Q,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function fI(t,e){if(null==t)return Dn;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function J(t){return t[Oa]||null}function Ye(t){return t[ud]||null}function ft(t){return t[ld]||null}function La(t,e){if(!t)return null;const n=e?ft:Hk;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter($k)}const ke=0,D=1,F=2,pe=3,Ht=4,Sr=5,Qe=6,_i=7,Ee=8,yi=9,Ar=10,O=11,Oo=12,gI=13,vi=14,be=15,Lo=16,Ei=17,tn=18,Fo=19,mI=20,Xn=21,bn=22,Fa=23,Va=24,K=25,fd=1,_I=2,nn=7,Ii=9,je=11;function bt(t){return Array.isArray(t)&&"object"==typeof t[fd]}function ht(t){return Array.isArray(t)&&!0===t[fd]}function hd(t){return 0!=(4&t.flags)}function Mr(t){return t.componentOffset>-1}function Ua(t){return 1==(1&t.flags)}function $t(t){return!!t.template}function pd(t){return 0!=(512&t[F])}function Nr(t,e){return t.hasOwnProperty(Cn)?t[Cn]:null}let Qk=oe.WeakRef??class Yk{constructor(e){this.ref=e}deref(){return this.ref}},Jk=0,rn=null,Ha=!1;function Fe(t){const e=rn;return rn=t,e}class wI{constructor(){this.id=Jk++,this.ref=function Zk(t){return new Qk(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(void 0!==r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Ha;Ha=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();void 0!==i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{Ha=e}}producerAccessed(){if(Ha)throw new Error("");if(null===rn)return;let e=rn.producers.get(this.id);void 0===e?(e={consumerNode:rn.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:rn.trackingVersion},rn.producers.set(this.id,e),this.consumers.set(rn.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=rn.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==rn?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let DI=null;const TI=()=>{};class nx extends wI{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=TI,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Fe(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=TI,this.watch(this.registerOnCleanup)}finally{Fe(e)}}cleanup(){this.cleanupFn()}}class rx{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function bI(t){return t.type.prototype.ngOnChanges&&(t.setInput=ox),ix}function ix(){const t=AI(this),e=t?.current;if(e){const n=t.previous;if(n===Dn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ox(t,e,n,r){const i=this.declaredInputs[n],o=AI(t)||function sx(t,e){return t[SI]=e}(t,{previous:Dn,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new rx(c&&c.currentValue,e,a===Dn),t[r]=e}const SI="__ngSimpleChanges__";function AI(t){return t[SI]||null}const on=function(t,e,n){};function le(t){for(;Array.isArray(t);)t=t[ke];return t}function pt(t,e){return le(e[t.index])}function gt(t,e){const n=e[t];return bt(n)?n:n[ke]}function Ga(t){return 128==(128&t[F])}function er(t,e){return null==e?null:t[e]}function PI(t){t[Ei]=0}function fx(t){1024&t[F]||(t[F]|=1024,xI(t,1))}function kI(t){1024&t[F]&&(t[F]&=-1025,xI(t,-1))}function xI(t,e){let n=t[pe];if(null===n)return;n[Sr]+=e;let r=n;for(n=n[pe];null!==n&&(1===e&&1===r[Sr]||-1===e&&0===r[Sr]);)n[Sr]+=e,r=n,n=n[pe]}const R={lFrame:zI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function FI(){return R.bindingsEnabled}function E(){return R.lFrame.lView}function Y(){return R.lFrame.tView}function We(){let t=VI();for(;null!==t&&64===t.type;)t=t.parent;return t}function VI(){return R.lFrame.currentTNode}function sn(t,e){const n=R.lFrame;n.currentTNode=t,n.isParent=e}function Ed(){return R.lFrame.isParent}function bx(t,e){const n=R.lFrame;n.bindingIndex=n.bindingRootIndex=t,wd(e)}function wd(t){R.lFrame.currentDirectiveIndex=t}function Cd(t){R.lFrame.currentQueryIndex=t}function Ax(t){const e=t[D];return 2===e.type?e.declTNode:1===e.type?t[Qe]:null}function jI(t,e,n){if(n&P.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&P.Host||(i=Ax(o),null===i||(o=o[vi],10&i.type))););if(null===i)return!1;e=i,t=o}const r=R.lFrame=WI();return r.currentTNode=e,r.lView=t,!0}function Td(t){const e=WI(),n=t[D];R.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function WI(){const t=R.lFrame,e=null===t?null:t.child;return null===e?zI(t):e}function zI(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function GI(){const t=R.lFrame;return R.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const qI=GI;function bd(){const t=GI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Rr(t){R.lFrame.selectedIndex=t}let YI=!0;function qa(){return YI}function tr(t){YI=t}function Ka(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function Ya(t,e,n){QI(t,e,3,n)}function Qa(t,e,n,r){(3&t[F])===n&&QI(t,e,n,r)}function Sd(t,e){let n=t[F];(3&n)===e&&(n&=4095,n+=1,t[F]=n)}function QI(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[Ei]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[Ei]+=65536),(a<o||-1==o)&&(Lx(t,n,e,c),t[Ei]=(4294901760&t[Ei])+c+2),c++}function ZI(t,e){on(4,t,e);const n=Fe(null);try{e.call(t)}finally{Fe(n),on(5,t,e)}}function Lx(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[F]>>12<t[Ei]>>16&&(3&t[F])===e&&(t[F]+=4096,ZI(a,o)):ZI(a,o)}const Ti=-1;class Uo{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Za(t){return 32767&t}function Ja(t,e){let n=function Ux(t){return t>>16}(t),r=e;for(;n>0;)r=r[vi],n--;return r}let Md=!0;function Xa(t){const e=Md;return Md=t,e}const XI=255,ew=5;let Hx=0;const an={};function ec(t,e){const n=tw(t,e);if(-1!==n)return n;const r=e[D];r.firstCreatePass&&(t.injectorIndex=e.length,Nd(r.data,t),Nd(e,null),Nd(r.blueprint,null));const i=Rd(t,e),o=t.injectorIndex;if(function JI(t){return t!==Ti}(i)){const s=Za(i),a=Ja(i,e),c=a[D].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Nd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function tw(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Rd(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=cw(i),null===r)return Ti;if(n++,i=i[vi],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ti}function Pd(t,e,n){!function $x(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Po)&&(r=n[Po]),null==r&&(r=n[Po]=Hx++);const i=r&XI;e.data[t+(i>>ew)]|=1<<i}(t,e,n)}function nw(t,e,n){if(n&P.Optional||void 0!==t)return t;Na()}function rw(t,e,n,r){if(n&P.Optional&&void 0===r&&(r=null),!(n&(P.Self|P.Host))){const i=t[yi],o=lt(void 0);try{return i?i.get(e,r,n&P.Optional):JE(e,r,n&P.Optional)}finally{lt(o)}}return nw(r,0,n)}function iw(t,e,n,r=P.Default,i){if(null!==t){if(2048&e[F]&&!(r&P.Self)){const s=function Kx(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[F]&&!(512&s[F]);){const a=ow(o,s,n,r|P.Self,an);if(a!==an)return a;let c=o.parent;if(!c){const u=s[mI];if(u){const l=u.get(n,an,r);if(l!==an)return l}c=cw(s),s=s[vi]}o=c}return i}(t,e,n,r,an);if(s!==an)return s}const o=ow(t,e,n,r,an);if(o!==an)return o}return rw(e,n,r,i)}function ow(t,e,n,r,i){const o=function zx(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Po)?t[Po]:void 0;return"number"==typeof e?e>=0?e&XI:Gx:e}(n);if("function"==typeof o){if(!jI(e,t,r))return r&P.Host?nw(i,0,r):rw(e,n,r,i);try{const s=o(r);if(null!=s||r&P.Optional)return s;Na()}finally{qI()}}else if("number"==typeof o){let s=null,a=tw(t,e),c=Ti,u=r&P.Host?e[be][Qe]:null;for((-1===a||r&P.SkipSelf)&&(c=-1===a?Rd(t,e):e[a+8],c!==Ti&&aw(r,!1)?(s=e[D],a=Za(c),e=Ja(c,e)):a=-1);-1!==a;){const l=e[D];if(sw(o,a,l.data)){const d=Wx(a,e,n,s,r,u);if(d!==an)return d}c=e[a+8],c!==Ti&&aw(r,e[D].data[a+8]===u)&&sw(o,a,e)?(s=l,a=Za(c),e=Ja(c,e)):a=-1}}return i}function Wx(t,e,n,r,i,o){const s=e[D],a=s.data[t+8],l=function tc(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,l=o>>20,f=i?a+l:t.directiveEnd;for(let h=r?a:a+l;h<f;h++){const p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){const h=s[c];if(h&&$t(h)&&h.type===n)return c}return null}(a,s,n,null==r?Mr(a)&&Md:r!=s&&0!=(3&a.type),i&P.Host&&o===a);return null!==l?Pr(e,s,l,a):an}function Pr(t,e,n,r){let i=t[n];const o=e.data;if(function Fx(t){return t instanceof Uo}(i)){const s=i;s.resolving&&function pk(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new b(-200,`Circular dependency in DI detected for ${t}${n}`)}(X(o[n]));const a=Xa(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?lt(s.injectImpl):null;jI(t,r,P.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Ox(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=bI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==c&&lt(c),Xa(a),s.resolving=!1,qI()}}return i}function sw(t,e,n){return!!(n[e+(t>>ew)]&1<<t)}function aw(t,e){return!(t&P.Self||t&P.Host&&e)}class bi{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return iw(this._tNode,this._lView,e,xa(r),n)}}function Gx(){return new bi(We(),E())}function cw(t){const e=t[D],n=e.type;return 2===n?e.declTNode:1===n?t[Qe]:null}const Ai="__parameters__";function Ni(t,e,n){return wn(()=>{const r=function Od(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,l){const d=c.hasOwnProperty(Ai)?c[Ai]:Object.defineProperty(c,Ai,{value:[]})[Ai];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function jo(t,e){t.forEach(n=>Array.isArray(n)?jo(n,e):e(n))}function nc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Ze=Ro(Ni("Optional"),8);var mt=(()=>((mt=mt||{})[mt.Important=1]="Important",mt[mt.DashCase=2]="DashCase",mt))();const jd=new Map;let DO=0;const zd="__ngContext__";function Je(t,e){bt(e)?(t[zd]=e[Fo],function TO(t){jd.set(t[Fo],t)}(e)):t[zd]=e}let Gd;function qd(t,e){return Gd(t,e)}function qo(t){const e=t[pe];return ht(e)?e[pe]:e}function Kd(t){return Nw(t[Oo])}function Yd(t){return Nw(t[Ht])}function Nw(t){for(;null!==t&&!ht(t);)t=t[Ht];return t}function xi(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:bt(r)&&(s=!0,r=r[ke]);const a=le(r);0===t&&null!==n?null==i?Ow(e,n,a):kr(e,n,a,i||null,!0):1===t&&null!==n?kr(e,n,a,i||null,!0):2===t?function hc(t,e,n){const r=function dc(t,e){return t.parentNode(e)}(t,e);r&&function WO(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function qO(t,e,n,r,i){const o=n[nn];o!==le(n)&&xi(e,t,r,o,i);for(let a=je;a<n.length;a++){const c=n[a];Yo(c[D],c,t,e,r,o)}}(e,t,o,n,i)}}function lc(t,e,n){return t.createElement(e,n)}function Pw(t,e){const n=t[Ii],r=n.indexOf(e);kI(e),n.splice(r,1)}function Jd(t,e){if(!(256&e[F])){e[F]&=-129,e[F]|=256,function jO(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Uo)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];on(4,a,c);try{c.call(a)}finally{on(5,a,c)}}else{on(4,i,o);try{o.call(i)}finally{on(5,i,o)}}}}}(t,e),function $O(t,e){const n=t.cleanup,r=e[_i];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[_i]=null);const i=e[Xn];if(null!==i){e[Xn]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[D].type&&e[O].destroy();const n=e[Lo];if(null!==n&&ht(e[pe])){n!==e[pe]&&Pw(n,e);const r=e[tn];null!==r&&r.detachView(t)}!function bO(t){jd.delete(t[Fo])}(e)}}function Xd(t,e,n){return function xw(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[ke];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===Ct.None||o===Ct.Emulated)return null}return pt(r,n)}}(t,e.parent,n)}function kr(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ow(t,e,n){t.appendChild(e,n)}function Lw(t,e,n,r,i){null!==r?kr(t,e,n,r,i):Ow(t,e,n)}let ef,of,Bw=function Vw(t,e,n){return 40&t.type?pt(t,n):null};function fc(t,e,n,r){const i=Xd(t,r,e),o=e[O],a=function Fw(t,e,n){return Bw(t,e,n)}(r.parent||e[Qe],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)Lw(o,i,n[c],a,!1);else Lw(o,i,n,a,!1);void 0!==ef&&ef(o,r,e,n,i)}function Hw(t,e){return null!==e?t[be][Qe].projection[e.projection]:null}function nf(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===e&&(a&&Je(le(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)nf(t,e,n.child,r,i,o,!1),xi(e,t,i,a,o);else if(32&c){const u=qd(n,r);let l;for(;l=u();)xi(e,t,i,l,o);xi(e,t,i,a,o)}else 16&c?jw(t,e,r,n,i,o):xi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Yo(t,e,n,r,i,o){nf(n,r,t.firstChild,e,i,o,!1)}function jw(t,e,n,r,i,o){const s=n[be],c=s[Qe].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)xi(e,t,i,c[u],o);else{let u=c;const l=s[pe];(function ac(t){return 128==(128&t.flags)})(r)&&(u.flags|=128),nf(t,e,u,l,i,o,!0)}}function Ww(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function zw(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&dd(t,e,r),null!==i&&Ww(t,e,i),null!==o&&function YO(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}class M{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _c=new M("ENVIRONMENT_INITIALIZER"),iD=new M("INJECTOR",-1),oD=new M("INJECTOR_DEF_TYPES");class sD{get(e,n=No){if(n===No){const r=new Error(`NullInjectorError: No provider for ${Pe(e)}!`);throw r.name="NullInjectorError",r}return n}}function DL(...t){return{\u0275providers:cD(0,t),\u0275fromNgModule:!0}}function cD(t,...e){const n=[],r=new Set;let i;return jo(e,o=>{const s=o;df(s,n,[],r)&&(i||=[],i.push(s))}),void 0!==i&&uD(i,n),n}function uD(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];ff(i,o=>{e.push(o)})}}function df(t,e,n,r){if(!(t=k(t)))return!1;let i=null,o=YE(t);const s=!o&&J(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=YE(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)df(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{jo(o.imports,l=>{df(l,e,n,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&uD(u,e)}if(!a){const u=Nr(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:Q},{provide:oD,useValue:i,multi:!0},{provide:_c,useValue:()=>q(i),multi:!0})}const c=o.providers;null==c||a||ff(c,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function ff(t,e){for(let n of t)id(n)&&(n=n.\u0275providers),Array.isArray(n)?ff(n,e):e(n)}const CL=ne({provide:String,useValue:ne});function hf(t){return null!==t&&"object"==typeof t&&CL in t}function xr(t){return"function"==typeof t}const pf=new M("Set Injector scope."),yc={},bL={};let gf;function vc(){return void 0===gf&&(gf=new sD),gf}class Li{}class mf extends Li{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yf(e,s=>this.processProvider(s)),this.records.set(iD,Fi(void 0,this)),i.has("environment")&&this.records.set(Li,Fi(void 0,this));const o=this.records.get(pf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(oD.multi,Q,P.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Jn(this),r=lt(void 0);try{return e()}finally{Jn(n),lt(r)}}get(e,n=No,r=P.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(nI))return e[nI](this);r=xa(r);const i=Jn(this),o=lt(void 0);try{if(!(r&P.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function RL(t){return"function"==typeof t||"object"==typeof t&&t instanceof M}(e)&&Ra(e);a=c&&this.injectableDefInScope(c)?Fi(_f(e),yc):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&P.Self?vc():this.parent).get(e,n=r&P.Optional&&n===No?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[ka]=s[ka]||[]).unshift(Pe(e)),i)throw s;return function Sk(t,e,n,r){const i=t[ka];throw e[XE]&&i.unshift(e[XE]),t.message=function Ak(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Pe(e);if(Array.isArray(e))i=e.map(Pe).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Pe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wk,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ka]=null,t}(s,e,"R3InjectorError",this.source)}throw s}finally{lt(o),Jn(i)}}resolveInjectorInitializers(){const e=Jn(this),n=lt(void 0);try{const r=this.get(_c.multi,Q,P.Self);for(const i of r)i()}finally{Jn(e),lt(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Pe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new b(205,!1)}processProvider(e){let n=xr(e=k(e))?e:k(e&&e.provide);const r=function AL(t){return hf(t)?Fi(void 0,t.useValue):Fi(function fD(t,e,n){let r;if(xr(t)){const i=k(t);return Nr(i)||_f(i)}if(hf(t))r=()=>k(t.useValue);else if(function dD(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...cd(t.deps||[]));else if(function lD(t){return!(!t||!t.useExisting)}(t))r=()=>q(k(t.useExisting));else{const i=k(t&&(t.useClass||t.provide));if(!function ML(t){return!!t.deps}(t))return Nr(i)||_f(i);r=()=>new i(...cd(t.deps))}return r}(t),yc)}(e);if(xr(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Fi(void 0,yc,!0),i.factory=()=>cd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===yc&&(n.value=bL,n.value=n.factory()),"object"==typeof n.value&&n.value&&function NL(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=k(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function _f(t){const e=Ra(t),n=null!==e?e.factory:Nr(t);if(null!==n)return n;if(t instanceof M)throw new b(204,!1);if(t instanceof Function)return function SL(t){const e=t.length;if(e>0)throw function Wo(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new b(204,!1);const n=function vk(t){return t&&(t[Pa]||t[QE])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new b(204,!1)}function Fi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yf(t,e){for(const n of t)Array.isArray(n)?yf(n,e):n&&id(n)?yf(n.\u0275providers,e):e(n)}const Ec=new M("AppId",{providedIn:"root",factory:()=>PL}),PL="ng",hD=new M("Platform Initializer"),rr=new M("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pD=new M("CSP nonce",{providedIn:"root",factory:()=>function Qo(){if(void 0!==of)return of;if(typeof document<"u")return document;throw new b(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let mD=(t,e)=>null;function _D(t,e){return mD(t,e)}class HL{}class ED{}class jL{resolveComponentFactory(e){throw function $L(t){const e=Error(`No component factory found for ${Pe(t)}.`);return e.ngComponent=t,e}(e)}}let Tc=(()=>{class t{}return t.NULL=new jL,t})();function WL(){return Vi(We(),E())}function Vi(t,e){return new Bi(pt(t,e))}let Bi=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=WL,t})();class wD{}let qL=(()=>{class t{}return t.\u0275prov=re({token:t,providedIn:"root",factory:()=>null}),t})();class bc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const CD=new bc("16.0.4"),Mf={};function rs(t){for(;t;){t[F]|=64;const e=qo(t);if(pd(t)&&!e)return t;t=e}return null}function Nf(t){return t.ngOriginalError}class Or{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Nf(e);for(;n&&Nf(n);)n=Nf(n);return n||null}}const SD=new M("",{providedIn:"root",factory:()=>!1});class PD extends wI{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){rs(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=Fe(this);this.trackingVersion++;try{e(n,r)}finally{Fe(i)}}destroy(){this.trackingVersion++}}let Ac=null;function kD(){return Ac??=new PD,Ac}function xD(t,e){return t[e]??kD()}function OD(t,e){const n=kD();n.hasReadASignal&&(t[e]=Ac,n.lView=t,Ac=new PD)}const L={};function UD(t,e=null,n=null,r){const i=HD(t,e,n,r);return i.resolveInjectorInitializers(),i}function HD(t,e=null,n=null,r,i=new Set){const o=[n||Q,DL(t)];return r=r||("object"==typeof t?void 0:Pe(t)),new mf(o,e||vc(),r||null,i)}let jt=(()=>{class t{static create(n,r){if(Array.isArray(n))return UD({name:""},r,n,"");{const i=n.name??"";return UD({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=No,t.NULL=new sD,t.\u0275prov=re({token:t,providedIn:"any",factory:()=>q(iD)}),t.__NG_ELEMENT_ID__=-1,t})();function $(t,e=P.Default){const n=E();return null===n?q(t,e):iw(We(),n,k(t),e)}function Mc(t,e,n,r,i,o,s,a,c,u,l){const d=e.blueprint.slice();return d[ke]=i,d[F]=140|r,(null!==u||t&&2048&t[F])&&(d[F]|=2048),PI(d),d[pe]=d[vi]=t,d[Ee]=n,d[Ar]=s||t&&t[Ar],d[O]=a||t&&t[O],d[yi]=c||t&&t[yi]||null,d[Qe]=o,d[Fo]=function CO(){return DO++}(),d[bn]=l,d[mI]=u,d[be]=2==e.type?t[be]:d,d}function Hi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function Rf(t,e,n,r,i){const o=VI(),s=Ed(),c=t.data[e]=function m1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function Di(){return null!==R.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(t,e,n,r,i),function Tx(){return R.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Bo(){const t=R.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return sn(o,!0),o}function is(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function $D(t,e,n,r,i){const o=xD(e,Fa),s=function rt(){return R.lFrame.selectedIndex}(),a=2&r;try{if(Rr(-1),a&&e.length>K&&function LD(t,e,n,r){if(!r)if(3==(3&e[F])){const o=t.preOrderCheckHooks;null!==o&&Ya(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Qa(e,o,0,n)}Rr(n)}(t,e,K,!1),on(a?2:0,i),a)o.runInContext(n,r,i);else{const u=Fe(null);try{n(r,i)}finally{Fe(u)}}}finally{a&&null===e[Fa]&&OD(e,Fa),Rr(s),on(a?3:1,i)}}function Pf(t,e,n){if(hd(e)){const r=Fe(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Fe(r)}}}function jD(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Of(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Of(t,e,n,r,i,o,s,a,c,u,l){const d=K+r,f=d+i,h=function l1(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:L);return n}(d,f),p="function"==typeof u?u():u;return h[D]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}let WD=t=>null;function zD(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?GD(n,e,i,o):r.hasOwnProperty(i)&&GD(n,e,r[i],o)}return n}function GD(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function qD(t,e,n,r,i,o){for(let u=0;u<r.length;u++)Pd(ec(n,e),t,r[u].type);!function A1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=is(t,e,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];n.mergedAttrs=ko(n.mergedAttrs,l.hostAttrs),M1(t,n,e,c,l),S1(c,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function _1(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<i;l++){const d=o[l],f=n?n.get(d):null,p=f?f.outputs:null;c=zD(d.inputs,l,c,f?f.inputs:null),u=zD(d.outputs,l,u,p);const m=null===c||null===s||cI(e)?null:P1(c,l,s);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(t,n,o)}function KD(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function Sx(){return R.lFrame.currentDirectiveIndex}();try{Rr(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];wd(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&C1(c,u)}}finally{Rr(-1),wd(s)}}function C1(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ff(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function S1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;$t(e)&&(n[""]=t)}}function M1(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Nr(i.type)),s=new Uo(o,$t(i),$);t.blueprint[r]=s,n[r]=s,function I1(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function w1(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,is(t,n,i.hostVars,L),i)}function R1(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)YD(r,n,s[a++],s[a++],s[a++])}function YD(t,e,n,r,i){const o=Fe(null);try{null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Fe(o)}}function P1(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function ZD(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];Cd(n[r]),s.contentQueries(2,e[o],o)}}}function Nc(t,e){return t[Oo]?t[gI][Ht]=e:t[Oo]=e,t[gI]=e,e}function Bf(t,e,n){Cd(0);const r=Fe(null);try{e(t,n)}finally{Fe(r)}}function tC(t,e){const n=t[yi],r=n?n.get(Or,null):null;r&&r.handleError(e)}function Uf(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];YD(t.data[s],e[s],r,a,i)}}function k1(t,e){const n=gt(e,t),r=n[D];!function x1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[ke];null!==i&&null===n[bn]&&(n[bn]=_D(i,n[yi])),Hf(r,n,n[Ee])}function Hf(t,e,n){Td(e);try{const r=t.viewQuery;null!==r&&Bf(1,r,n);const i=t.template;null!==i&&$D(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ZD(t,e),t.staticViewQueries&&Bf(2,t.viewQuery,n);const o=t.components;null!==o&&function O1(t,e){for(let n=0;n<e.length;n++)k1(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[F]&=-5,bd()}}let nC=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=new nx(n,u=>{this.all.has(u)&&this.queue.set(u,o)},i);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return t.\u0275prov=re({token:t,providedIn:"root",factory:()=>new t}),t})();function Rc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=td(i,a):2==o&&(r=td(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function os(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(le(o)),ht(o)){for(let a=je;a<o.length;a++){const c=o[a],u=c[D].firstChild;null!==u&&os(c[D],c,u,r)}o[nn]!==o[ke]&&r.push(o[nn])}const s=n.type;if(8&s)os(t,e,n.child,r);else if(32&s){const a=qd(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Hw(e,n);if(Array.isArray(a))r.push(...a);else{const c=qo(e[be]);os(c[D],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Pc(t,e,n,r=!0){const i=e[Ar].rendererFactory;i.begin&&i.begin();try{kc(t,e,t.template,n)}catch(s){throw r&&tC(e,s),s}finally{i.end&&i.end(),e[Ar].effectManager?.flush()}}function kc(t,e,n,r){const i=e[F];if(256!=(256&i)){e[Ar].effectManager?.flush(),Td(e);try{PI(e),function UI(t){return R.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&$D(t,e,n,2,r);const s=3==(3&i);if(s){const u=t.preOrderCheckHooks;null!==u&&Ya(e,u,null)}else{const u=t.preOrderHooks;null!==u&&Qa(e,u,0,null),Sd(e,0)}if(function H1(t){for(let e=Kd(t);null!==e;e=Yd(e)){if(!e[_I])continue;const n=e[Ii];for(let r=0;r<n.length;r++){fx(n[r])}}}(e),function U1(t){for(let e=Kd(t);null!==e;e=Yd(e))for(let n=je;n<e.length;n++){const r=e[n],i=r[D];Ga(r)&&kc(i,r,i.template,r[Ee])}}(e),null!==t.contentQueries&&ZD(t,e),s){const u=t.contentCheckHooks;null!==u&&Ya(e,u)}else{const u=t.contentHooks;null!==u&&Qa(e,u,1),Sd(e,1)}!function u1(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=xD(e,Va);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Rr(~o);else{const s=o,a=n[++i],c=n[++i];bx(a,s),r.runInContext(c,2,e[s])}}}finally{null===e[Va]&&OD(e,Va),Rr(-1)}}(t,e);const a=t.components;null!==a&&function j1(t,e){for(let n=0;n<e.length;n++)$1(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&Bf(2,c,r),s){const u=t.viewCheckHooks;null!==u&&Ya(e,u)}else{const u=t.viewHooks;null!==u&&Qa(e,u,2),Sd(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[F]&=-73,kI(e)}finally{bd()}}}function $1(t,e){const n=gt(e,t);if(Ga(n)){const r=n[D];80&n[F]?kc(r,n,r.template,n[Ee]):n[Sr]>0&&$f(n)}}function $f(t){for(let r=Kd(t);null!==r;r=Yd(r))for(let i=je;i<r.length;i++){const o=r[i];if(Ga(o))if(1024&o[F]){const s=o[D];kc(s,o,s.template,o[Ee])}else o[Sr]>0&&$f(o)}const n=t[D].components;if(null!==n)for(let r=0;r<n.length;r++){const i=gt(n[r],t);Ga(i)&&i[Sr]>0&&$f(i)}}class ss{get rootNodes(){const e=this._lView,n=e[D];return os(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ee]}set context(e){this._lView[Ee]=e}get destroyed(){return 256==(256&this._lView[F])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[pe];if(ht(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(function Zd(t,e){if(t.length<=je)return;const n=je+e,r=t[n];if(r){const i=r[Lo];null!==i&&i!==t&&Pw(i,r),e>0&&(t[n-1][Ht]=r[Ht]);const o=nc(t,je+e);!function LO(t,e){Yo(t,e,e[O],2,null,null),e[ke]=null,e[Qe]=null}(r[D],r);const s=o[tn];null!==s&&s.detachView(o[D]),r[pe]=null,r[Ht]=null,r[F]&=-129}return r}(e,r),nc(n,r))}this._attachedToViewContainer=!1}!function kw(t,e){if(!(256&e[F])){const n=e[O];e[Fa]?.destroy(),e[Va]?.destroy(),n.destroyNode&&Yo(t,e,n,3,null,null),function BO(t){let e=t[Oo];if(!e)return Jd(t[D],t);for(;e;){let n=null;if(bt(e))n=e[Oo];else{const r=e[je];r&&(n=r)}if(!n){for(;e&&!e[Ht]&&e!==t;)bt(e)&&Jd(e[D],e),e=e[pe];null===e&&(e=t),bt(e)&&Jd(e[D],e),n=e&&e[Ht]}e=n}}(e)}}(this._lView[D],this._lView)}onDestroy(e){!function OI(t,e){if(256==(256&t[F]))throw new b(911,!1);null===t[Xn]&&(t[Xn]=[]),t[Xn].push(e)}(this._lView,e)}markForCheck(){rs(this._cdRefInjectingView||this._lView)}detach(){this._lView[F]&=-129}reattach(){this._lView[F]|=128}detectChanges(){Pc(this._lView[D],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function VO(t,e){Yo(t,e,e[O],2,null,null)}(this._lView[D],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=e}}class W1 extends ss{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Pc(e[D],e,e[Ee],!1)}checkNoChanges(){}get context(){return null}}class rC extends Tc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=J(e);return new as(n,this.ngModule)}}function iC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class G1{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=xa(r);const i=this.injector.get(e,Mf,r);return i!==Mf||n===Mf?i:this.parentInjector.get(e,n,r)}}class as extends ED{get inputs(){return iC(this.componentDef.inputs)}get outputs(){return iC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Vk(t){return t.map(Fk).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof Li?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new G1(e,o):e,a=s.get(wD,null);if(null===a)throw new b(407,!1);const l={rendererFactory:a,sanitizer:s.get(qL,null),effectManager:s.get(nC,null)},d=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",h=r?function d1(t,e,n,r){const o=r.get(SD,!1)||n===Ct.ShadowDom,s=t.selectRootElement(e,o);return function f1(t){WD(t)}(s),s}(d,r,this.componentDef.encapsulation,s):lc(d,f,function z1(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),p=this.componentDef.onPush?576:528,m=Of(0,null,null,1,0,null,null,null,null,null,null),y=Mc(null,m,null,p,null,null,l,d,s,null,null);let v,_;Td(y);try{const T=this.componentDef;let S,H=null;T.findHostDirectiveDefs?(S=[],H=new Map,T.findHostDirectiveDefs(T,S,H),S.push(T)):S=[T];const ut=function K1(t,e){const n=t[D],r=K;return t[r]=e,Hi(n,r,2,"#host",null)}(y,h),va=function Y1(t,e,n,r,i,o,s){const a=i[D];!function Q1(t,e,n,r){for(const i of t)e.mergedAttrs=ko(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Rc(e,e.mergedAttrs,!0),null!==n&&zw(r,n,e))}(r,t,e,s);let c=null;null!==e&&(c=_D(e,i[yi]));const u=o.rendererFactory.createRenderer(e,n),l=Mc(i,jD(n),null,n.onPush?64:16,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Ff(a,t,r.length-1),Nc(i,l),i[t.index]=l}(ut,h,T,S,y,l,d);_=function RI(t,e){return t.data[e]}(m,K),h&&function J1(t,e,n,r){if(r)dd(t,n,["ng-version",CD.full]);else{const{attrs:i,classes:o}=function Bk(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ut(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&dd(t,n,i),o&&o.length>0&&Ww(t,n,o.join(" "))}}(d,T,h,r),void 0!==n&&function X1(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(_,this.ngContentSelectors,n),v=function Z1(t,e,n,r,i,o){const s=We(),a=i[D],c=pt(s,i);qD(a,i,s,n,null,r);for(let l=0;l<n.length;l++)Je(Pr(i,a,s.directiveStart+l,s),i);KD(a,i,s),c&&Je(c,i);const u=Pr(i,a,s.directiveStart+s.componentOffset,s);if(t[Ee]=i[Ee]=u,null!==o)for(const l of o)l(u,e);return Pf(a,s,t),u}(va,T,S,H,y,[eF]),Hf(m,y,null)}finally{bd()}return new q1(this.componentType,v,Vi(_,y),y,_)}}class q1 extends HL{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new W1(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;Uf(o[D],o,i,e,n),this.previousInputValues.set(e,n),rs(gt(this._tNode.index,o))}}get injector(){return new bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function eF(){const t=We();Ka(E()[D],t)}function Qf(t,e,n,r,i){const s=i?"class":"style";Uf(t,n,e.inputs[s],s,r)}function Bc(t,e,n,r){const i=E(),o=Y(),s=K+t,a=i[O],c=o.firstCreatePass?function OF(t,e,n,r,i,o){const s=e.consts,c=Hi(e,t,2,r,er(s,i));return function Lf(t,e,n,r){if(FI()){const i=null===r?null:{"":-1},o=function T1(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(uI(e,s.selectors,!1))if(r||(r=[]),$t(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Ff(t,e,a.length)}else r.unshift(s),Ff(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&qD(t,e,n,s,i,a),i&&function b1(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new b(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=ko(n.mergedAttrs,n.attrs)}(e,n,c,er(s,o)),null!==c.attrs&&Rc(c,c.attrs,!1),null!==c.mergedAttrs&&Rc(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,n,r):o.data[s],u=SC(o,i,c,a,e,t);i[s]=u;const l=Ua(c);return sn(c,!0),zw(a,u,c),32!=(32&c.flags)&&qa()&&fc(o,i,u,c),0===function px(){return R.lFrame.elementDepthCount}()&&Je(u,i),function gx(){R.lFrame.elementDepthCount++}(),l&&(function kf(t,e,n){FI()&&(function D1(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;Mr(n)&&function N1(t,e,n){const r=pt(e,t),s=Nc(t,Mc(t,jD(n),null,n.onPush?64:16,r,e,null,t[Ar].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ec(n,e),Je(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const c=t.data[a],u=Pr(e,t,a,n);Je(u,e),null!==s&&R1(0,a-i,u,c,0,s),$t(c)&&(gt(n.index,e)[Ee]=Pr(e,t,a,n))}}(t,e,n,pt(n,e)),64==(64&n.flags)&&KD(t,e,n))}(o,i,c),Pf(o,c,i)),null!==r&&function xf(t,e,n=pt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}(i,c),Bc}function Uc(){let t=We();Ed()?function Id(){R.lFrame.isParent=!1}():(t=t.parent,sn(t,!1));const e=t;(function _x(t){return R.skipHydrationRootTNode===t})(e)&&function Ix(){R.skipHydrationRootTNode=null}(),function mx(){R.lFrame.elementDepthCount--}();const n=Y();return n.firstCreatePass&&(Ka(n,t),hd(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Vx(t){return 0!=(8&t.flags)}(e)&&Qf(n,e,E(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Bx(t){return 0!=(16&t.flags)}(e)&&Qf(n,e,E(),e.stylesWithoutHost,!1),Uc}let SC=(t,e,n,r,i,o)=>(tr(!0),lc(r,i,function KI(){return R.lFrame.currentNamespace}()));function Xf(t){return!!t&&"function"==typeof t.then}function NC(t){return!!t&&"function"==typeof t.subscribe}function eh(t,e,n,r){const i=E(),o=Y(),s=We();return function PC(t,e,n,r,i,o,s){const a=Ua(r),u=t.firstCreatePass&&function XD(t){return t.cleanup||(t.cleanup=[])}(t),l=e[Ee],d=function JD(t){return t[_i]||(t[_i]=[])}(e);let f=!0;if(3&r.type||s){const m=pt(r,e),y=s?s(m):m,v=d.length,_=s?S=>s(le(S[r.index])):r.index;let T=null;if(!s&&a&&(T=function $F(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[_i],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=o,T.__ngLastListenerFn__=o,f=!1;else{o=xC(r,e,l,o,!1);const S=n.listen(y,i,o);d.push(o,S),u&&u.push(i,_,v,v+1)}}else o=xC(r,e,l,o,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const m=p.length;if(m)for(let y=0;y<m;y+=2){const H=e[p[y]][p[y+1]].subscribe(o),ut=d.length;d.push(o,H),u&&u.push(i,r.index,ut,-(ut+1))}}}(o,i,i[O],s,t,e,r),eh}function kC(t,e,n,r){try{return on(6,e,n),!1!==n(r)}catch(i){return tC(t,i),!1}finally{on(7,e,n)}}function xC(t,e,n,r,i){return function o(s){if(s===Function)return r;rs(t.componentOffset>-1?gt(t.index,e):e);let c=kC(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=kC(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&s.preventDefault(),c}}let sT=(t,e,n,r,i)=>(tr(!0),function uc(t,e){return t.createText(e)}(e[O],r));const Xi="en-US";let MT=Xi;class eo{}class LB{}class hh extends eo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rC(this);const i=function Tt(t,e){const n=t[tI]||null;if(!n&&!0===e)throw new Error(`Type ${Pe(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Nn(t){return t instanceof Function?t():t}(i.bootstrap),this._r3Injector=HD(e,n,[{provide:eo,useValue:this},{provide:Tc,useValue:this.componentFactoryResolver},...r],Pe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ph extends LB{constructor(e){super(),this.moduleType=e}create(e){return new hh(this.moduleType,e,[])}}function mh(t){return e=>{setTimeout(t,void 0,e)}}const Pn=class h2 extends ba{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=mh(o),i&&(i=mh(i)),s&&(s=mh(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Bt&&e.add(a),a}},jb=new M("Application Initializer");let Mh=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=ue(jb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Xf(o))n.push(o);else if(NC(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const xn=new M("LocaleId",{providedIn:"root",factory:()=>ue(xn,P.Optional|P.SkipSelf)||function aU(){return typeof $localize<"u"&&$localize.locale||Xi}()});let uU=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new CP(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const hU=(()=>Promise.resolve(0))();function Nh(t){typeof Zone>"u"?hU.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function Gb(...t){}class de{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pn(!1),this.onMicrotaskEmpty=new Pn(!1),this.onStable=new Pn(!1),this.onError=new Pn(!1),typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function pU(){let t=oe.requestAnimationFrame,e=oe.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function _U(t){const e=()=>{!function mU(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(oe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ph(t),t.isCheckStableRunning=!0,Rh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ph(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return qb(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Kb(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return qb(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Kb(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Ph(t),Rh(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!de.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(de.isInAngularZone())throw new b(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,gU,Gb,Gb);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const gU={};function Rh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ph(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function qb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Kb(t){t._nesting--,Rh(t)}class yU{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pn,this.onMicrotaskEmpty=new Pn,this.onStable=new Pn,this.onError=new Pn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const Yb=new M("",{providedIn:"root",factory:Qb});function Qb(){const t=ue(de);let e=!0;return function uk(...t){const e=jE(t),n=function nk(t,e){return"number"==typeof Jl(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Yn(r[0]):function XP(t=1/0){return Zl(Ta,t)}(n)(zE(r,e)):$E}(new Ke(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Ke(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{de.assertNotInAngularZone(),Nh(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=t.onUnstable.subscribe(()=>{de.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(GE()))}const Zb=new M(""),Yc=new M("");let Oh,kh=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Oh||(function vU(t){Oh=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{de.assertNotInAngularZone(),Nh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Nh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(q(de),q(xh),q(Yc))},t.\u0275prov=re({token:t,factory:t.\u0275fac}),t})(),xh=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Oh?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),or=null;const Jb=new M("AllowMultipleToken"),Lh=new M("PlatformDestroyListeners"),Xb=new M("appBootstrapListener");function nS(t,e,n=[]){const r=`Platform: ${e}`,i=new M(r);return(o=[])=>{let s=Fh();if(!s||s.injector.get(Jb,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function wU(t){if(or&&!or.get(Jb,!1))throw new b(400,!1);(function eS(){!function ex(t){DI=t}(()=>{throw new b(600,!1)})})(),or=t;const e=t.get(iS);(function tS(t){t.get(hD,null)?.forEach(n=>n())})(t)}(function rS(t=[],e){return jt.create({name:e,providers:[{provide:pf,useValue:"platform"},{provide:Lh,useValue:new Set([()=>or=null])},...t]})}(a,r))}return function CU(t){const e=Fh();if(!e)throw new b(401,!1);return e}()}}function Fh(){return or?.get(iS)??null}let iS=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function TU(t="zone.js",e){return"noop"===t?new yU:"zone.js"===t?new de(e):t}(r?.ngZone,function oS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function VB(t,e,n){return new hh(t,e,n)}(n.moduleType,this.injector,function lS(t){return[{provide:de,useFactory:t},{provide:_c,multi:!0,useFactory:()=>{const e=ue(SU,{optional:!0});return()=>e.initialize()}},{provide:uS,useFactory:bU},{provide:Yb,useFactory:Qb}]}(()=>i)),s=o.injector.get(Or,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{Qc(this._modules,o),a.unsubscribe()})}),function sS(t,e,n){try{const r=n();return Xf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(Mh);return a.runInitializers(),a.donePromise.then(()=>(function NT(t){Rt(t,"Expected localeId to be defined"),"string"==typeof t&&(MT=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(xn,Xi)||Xi),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=aS({},r);return function EU(t,e,n){const r=new ph(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Is);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new b(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new b(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Lh,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(q(jt))},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function aS(t,e){return Array.isArray(e)?e.reduce(aS,t):{...t,...e}}let Is=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ue(uS),this.zoneIsStable=ue(Yb),this.componentTypes=[],this.components=[],this.isStable=ue(uU).hasPendingTasks.pipe(Zl(n=>n?function lk(...t){return zE(t,jE(t))}(!1):this.zoneIsStable),function dk(t,e=Ta){return t=t??fk,br((n,r)=>{let i,o=!0;n.subscribe(gi(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}(),GE()),this._injector=ue(Li)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof ED;if(!this._injector.get(Mh).done)throw!i&&function xo(t){const e=J(t)||Ye(t)||ft(t);return null!==e&&e.standalone}(n),new b(405,!1);let s;s=i?n:this._injector.get(Tc).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function IU(t){return t.isBoundToModule}(s)?void 0:this._injector.get(eo),u=s.create(jt.NULL,[],r||s.selector,a),l=u.location.nativeElement,d=u.injector.get(Zb,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),Qc(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new b(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Qc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Xb,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Qc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Qc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const uS=new M("",{providedIn:"root",factory:()=>ue(Or).handleError.bind(void 0)});function bU(){const t=ue(de),e=ue(Or);return n=>t.runOutsideAngular(()=>e.handleError(n))}let SU=(()=>{class t{constructor(){this.zone=ue(de),this.applicationRef=ue(Is)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const WU=nS(null,"core",[]);let zU=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(q(Is))},t.\u0275mod=Tn({type:t}),t.\u0275inj=Xt({}),t})(),Wh=null;function zh(){return Wh}class nH{}const Ur=new M("DocumentToken");let y$=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=Xt({}),t})();function HS(t){return"server"===t}class Q$ extends nH{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class cp extends Q${static makeCurrent(){!function tH(t){Wh||(Wh=t)}(new cp)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Z$(){return bs=bs||document.querySelector("base"),bs?bs.getAttribute("href"):null}();return null==n?null:function J$(t){hu=hu||document.createElement("a"),hu.setAttribute("href",t);const e=hu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){bs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function HH(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let hu,bs=null,ej=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac}),t})();const up=new M("EventManagerPlugins");let qS=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}}return t.\u0275fac=function(n){return new(n||t)(q(up),q(de))},t.\u0275prov=re({token:t,factory:t.\u0275fac}),t})();class KS{constructor(e){this._doc=e}}const lp="ng-app-id";let YS=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=HS(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${lp}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(lp),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(lp,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)(q(Ur),q(Ec),q(pD,8),q(rr))},t.\u0275prov=re({token:t,factory:t.\u0275fac}),t})();const dp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fp=/%COMP%/g,ij=new M("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ZS(t,e){return e.map(n=>n.replace(fp,t))}let JS=(()=>{class t{constructor(n,r,i,o,s,a,c,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=HS(a),this.defaultRenderer=new hp(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ct.ShadowDom&&(r={...r,encapsulation:Ct.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof eA?i.applyToHost(n):i instanceof pp&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestory,d=this.platformIsServer;switch(r.encapsulation){case Ct.Emulated:o=new eA(c,u,r,this.appId,l,s,a,d);break;case Ct.ShadowDom:return new cj(c,u,n,r,s,a,this.nonce,d);default:o=new pp(c,u,r,l,s,a,d)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return t.\u0275fac=function(n){return new(n||t)(q(qS),q(YS),q(Ec),q(ij),q(Ur),q(rr),q(de),q(pD))},t.\u0275prov=re({token:t,factory:t.\u0275fac}),t})();class hp{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(dp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(XS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(XS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new b(5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=dp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=dp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(mt.DashCase|mt.Important)?e.style.setProperty(n,r,i&mt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&mt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=zh().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function XS(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class cj extends hp{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=ZS(i.id,i.styles);for(const l of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pp extends hp{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=c?ZS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class eA extends pp{constructor(e,n,r,i,o,s,a,c){const u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=function oj(t){return"_ngcontent-%COMP%".replace(fp,t)}(u),this.hostAttr=function sj(t){return"_nghost-%COMP%".replace(fp,t)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let uj=(()=>{class t extends KS{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(q(Ur))},t.\u0275prov=re({token:t,factory:t.\u0275fac}),t})();const tA=["alt","control","meta","shift"],lj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let fj=(()=>{class t extends KS{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zh().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),tA.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=lj[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tA.forEach(s=>{s!==i&&(0,dj[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(q(Ur))},t.\u0275prov=re({token:t,factory:t.\u0275fac}),t})();const mj=nS(WU,"browser",[{provide:rr,useValue:"browser"},{provide:hD,useValue:function hj(){cp.makeCurrent()},multi:!0},{provide:Ur,useFactory:function gj(){return function XO(t){of=t}(document),document},deps:[]}]),_j=new M(""),iA=[{provide:Yc,useClass:class X${addToWindow(e){oe.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new b(5103,!1);return o},oe.getAllAngularTestabilities=()=>e.getAllTestabilities(),oe.getAllAngularRootElements=()=>e.getAllRootElements(),oe.frameworkStabilizers||(oe.frameworkStabilizers=[]),oe.frameworkStabilizers.push(r=>{const i=oe.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?zh().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:Zb,useClass:kh,deps:[de,xh,Yc]},{provide:kh,useClass:kh,deps:[de,xh,Yc]}],oA=[{provide:pf,useValue:"root"},{provide:Or,useFactory:function pj(){return new Or},deps:[]},{provide:up,useClass:uj,multi:!0,deps:[Ur,de,rr]},{provide:up,useClass:fj,multi:!0,deps:[Ur]},JS,YS,qS,{provide:wD,useExisting:JS},{provide:class D${},useClass:ej,deps:[]},[]];let yj=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Ec,useValue:n.appId}]}}}return t.\u0275fac=function(n){return new(n||t)(q(_j,12))},t.\u0275mod=Tn({type:t}),t.\u0275inj=Xt({providers:[...oA,...iA],imports:[y$,zU]}),t})();function uA(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function g(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){uA(o,r,i,s,a,"next",c)}function a(c){uA(o,r,i,s,a,"throw",c)}s(void 0)})}}typeof window<"u"&&window;const w=function(t,e){if(!t)throw ro(e)},ro=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},lA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},pu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,h=63&u;c||(h=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==d)throw new bj;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dA=function(t){const e=lA(t);return pu.encodeByteArray(e,!0)},gu=function(t){return dA(t).replace(/\./g,"")},mu=function(t){try{return pu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Sj(t){return fA(void 0,t)}function fA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Aj(n)||(t[n]=fA(t[n],e[n]));return t}function Aj(t){return"__proto__"!==t}const _u=()=>{try{return function Mj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mu(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},hA=t=>{var e,n;return null===(n=null===(e=_u())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},pA=()=>{var t;return null===(t=_u())||void 0===t?void 0:t.config},gA=t=>{var e;return null===(e=_u())||void 0===e?void 0:e[`_${t}`]};class Hr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _p(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function yp(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function mA(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $r(){try{return"object"==typeof indexedDB}catch{return!1}}function Ss(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}function vp(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Yt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hn.prototype.create)}}class hn{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function Vj(t,e){return t.replace(Bj,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Yt(i,`${this.serviceName}: ${s} (${i}).`,r)}}const Bj=/\{\$([^}]+)}/g;function As(t){return JSON.parse(t)}function ze(t){return JSON.stringify(t)}const yu=function(t){let e={},n={},r={},i="";try{const o=t.split(".");e=As(mu(o[0])||""),n=As(mu(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function Fn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function io(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ep(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vu(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Eu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(_A(o)&&_A(s)){if(!Eu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _A(t){return null!==t&&"object"==typeof t}function Ms(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class $j{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(f<<1|f>>>31)}let u,l,i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=a^o&(s^a),l=1518500249):(u=o^s^a,l=1859775393):d<60?(u=o&s|a&(o|s),l=2400959708):(u=o^s^a,l=3395469782);const f=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=s,s=4294967295&(o<<30|o>>>2),o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<n;){if(0===s)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}class Wj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function zj(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=Ip),void 0===i.error&&(i.error=Ip),void 0===i.complete&&(i.complete=Ip);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ip(){}function oo(t,e){return`${t} failed: ${e} argument `}const Iu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},qj=1e3,Kj=2,Yj=144e5,Qj=.5;function wp(t,e=qj,n=Kj){const r=e*Math.pow(n,t),i=Math.round(Qj*r*(Math.random()-.5)*2);return Math.min(Yj,r+i)}function vt(t){return t&&t._delegate?t._delegate:t}class et{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jr="[DEFAULT]";class Jj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Hr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function eW(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return g(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===jr?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class tW{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Jj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Dp=[];var V=(()=>((V=V||{})[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V))();const yA={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},nW=V.INFO,rW={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},iW=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=rW[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class so{constructor(e){this.name=e,this._logLevel=nW,this._logHandler=iW,this._userLogHandler=null,Dp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in V))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?yA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...e),this._logHandler(this,V.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...e),this._logHandler(this,V.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,V.INFO,...e),this._logHandler(this,V.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,V.WARN,...e),this._logHandler(this,V.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...e),this._logHandler(this,V.ERROR,...e)}}const oW=(t,e)=>e.some(n=>t instanceof n);let vA,EA;const IA=new WeakMap,Cp=new WeakMap,wA=new WeakMap,Tp=new WeakMap,bp=new WeakMap;let Sp={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Cp.get(t);if("objectStoreNames"===e)return t.objectStoreNames||wA.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function fW(t){return"function"==typeof t?function dW(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function aW(){return EA||(EA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Ap(this),e),ar(IA.get(this))}:function(...e){return ar(t.apply(Ap(this),e))}:function(e,...n){const r=t.call(Ap(this),e,...n);return wA.set(r,e.sort?e.sort():[e]),ar(r)}}(t):(t instanceof IDBTransaction&&function uW(t){if(Cp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Cp.set(t,e)}(t),oW(t,function sW(){return vA||(vA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,Sp):t)}function ar(t){if(t instanceof IDBRequest)return function cW(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ar(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&IA.set(n,t)}).catch(()=>{}),bp.set(e,t),e}(t);if(Tp.has(t))return Tp.get(t);const e=fW(t);return e!==t&&(Tp.set(t,e),bp.set(e,t)),e}const Ap=t=>bp.get(t),pW=["get","getKey","getAll","getAllKeys","count"],gW=["put","add","delete","clear"],Mp=new Map;function DA(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Mp.get(e))return Mp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!pW.includes(n))return;const o=function(){var s=g(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return Mp.set(e,o),o}!function lW(t){Sp=t(Sp)}(t=>({...t,get:(e,n,r)=>DA(e,n)||t.get(e,n,r),has:(e,n)=>!!DA(e,n)||t.has(e,n)}));class mW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function _W(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Np="@firebase/app",Wr=new so("@firebase/app"),wu="[DEFAULT]",jW={[Np]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},zr=new Map,Du=new Map;function WW(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function st(t){const e=t.name;if(Du.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Du.set(e,t);for(const n of zr.values())WW(n,t);return!0}function Gr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Vn=new hn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class GW{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}const qr="9.22.1";function TA(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:wu,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Vn.create("bad-app-name",{appName:String(i)});if(n||(n=pA()),!n)throw Vn.create("no-options");const o=zr.get(i);if(o){if(Eu(n,o.options)&&Eu(r,o.config))return o;throw Vn.create("duplicate-app",{appName:i})}const s=new tW(i);for(const c of Du.values())s.addComponent(c);const a=new GW(n,r,s);return zr.set(i,a),a}function Cu(t=wu){const e=zr.get(t);if(!e&&t===wu&&pA())return TA();if(!e)throw Vn.create("no-app",{appName:t});return e}function bA(){return Array.from(zr.values())}function _e(t,e,n){var r;let i=null!==(r=jW[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Wr.warn(a.join(" "))}st(new et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const qW="firebase-heartbeat-database",KW=1,Ns="firebase-heartbeat-store";let Pp=null;function SA(){return Pp||(Pp=function hW(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=ar(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ar(s.result),c.oldVersion,c.newVersion,ar(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}(qW,KW,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ns)}}).catch(t=>{throw Vn.create("idb-open",{originalErrorMessage:t.message})})),Pp}function kp(){return(kp=g(function*(t){try{return yield(yield SA()).transaction(Ns).objectStore(Ns).get(MA(t))}catch(e){if(e instanceof Yt)Wr.warn(e.message);else{const n=Vn.create("idb-get",{originalErrorMessage:e?.message});Wr.warn(n.message)}}})).apply(this,arguments)}function AA(t,e){return xp.apply(this,arguments)}function xp(){return(xp=g(function*(t,e){try{const r=(yield SA()).transaction(Ns,"readwrite");yield r.objectStore(Ns).put(e,MA(t)),yield r.done}catch(n){if(n instanceof Yt)Wr.warn(n.message);else{const r=Vn.create("idb-set",{originalErrorMessage:n?.message});Wr.warn(r.message)}}})).apply(this,arguments)}function MA(t){return`${t.name}!${t.options.appId}`}class JW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ez(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return g(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=NA();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return g(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=NA(),{heartbeatsToSend:r,unsentEntries:i}=function XW(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),RA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),RA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=gu(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function NA(){return(new Date).toISOString().substring(0,10)}class ez{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(function*(){return!!$r()&&Ss().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return g(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function YW(t){return kp.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return g(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return AA(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return g(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return AA(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function RA(t){return gu(JSON.stringify({version:2,heartbeats:t})).length}!function tz(t){st(new et("platform-logger",e=>new mW(e),"PRIVATE")),st(new et("heartbeat",e=>new JW(e),"PRIVATE")),_e(Np,"0.9.11",t),_e(Np,"0.9.11","esm2017"),_e("fire-js","")}(""),_e("firebase","9.22.1","app");const iz=(t,e)=>e.some(n=>t instanceof n);let PA,kA;const xA=new WeakMap,Op=new WeakMap,OA=new WeakMap,Lp=new WeakMap,Fp=new WeakMap;let Vp={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Op.get(t);if("objectStoreNames"===e)return t.objectStoreNames||OA.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function dz(t){return"function"==typeof t?function lz(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function sz(){return kA||(kA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Bp(this),e),cr(xA.get(this))}:function(...e){return cr(t.apply(Bp(this),e))}:function(e,...n){const r=t.call(Bp(this),e,...n);return OA.set(r,e.sort?e.sort():[e]),cr(r)}}(t):(t instanceof IDBTransaction&&function cz(t){if(Op.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Op.set(t,e)}(t),iz(t,function oz(){return PA||(PA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,Vp):t)}function cr(t){if(t instanceof IDBRequest)return function az(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(cr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&xA.set(n,t)}).catch(()=>{}),Fp.set(e,t),e}(t);if(Lp.has(t))return Lp.get(t);const e=dz(t);return e!==t&&(Lp.set(t,e),Fp.set(e,t)),e}const Bp=t=>Fp.get(t),hz=["get","getKey","getAll","getAllKeys","count"],pz=["put","add","delete","clear"],Up=new Map;function LA(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!hz.includes(n))return;const o=function(){var s=g(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return Up.set(e,o),o}!function uz(t){Vp=t(Vp)}(t=>({...t,get:(e,n,r)=>LA(e,n)||t.get(e,n,r),has:(e,n)=>!!LA(e,n)||t.has(e,n)}));const FA="@firebase/installations",Hp="0.6.4",VA=1e4,BA=`w:${Hp}`,UA="FIS_v2",gz="https://firebaseinstallations.googleapis.com/v1",mz=36e5,Bn=new hn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function HA(t){return t instanceof Yt&&t.code.includes("request-failed")}function $p({projectId:t}){return`${gz}/projects/${t}/installations`}function $A(t){return{token:t.token,requestStatus:2,expiresIn:Ez(t.expiresIn),creationTime:Date.now()}}function jp(t,e){return Wp.apply(this,arguments)}function Wp(){return(Wp=g(function*(t,e){const r=(yield e.json()).error;return Bn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function jA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function zp(t){return Gp.apply(this,arguments)}function Gp(){return(Gp=g(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Ez(t){return Number(t.replace("s","000"))}function qp(){return(qp=g(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=$p(t),i=jA(t),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:UA,appId:t.appId,sdkVersion:BA})},c=yield zp(()=>fetch(r,a));if(c.ok){const u=yield c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:$A(u.authToken)}}throw yield jp("Create Installation",c)})).apply(this,arguments)}function zA(t){return new Promise(e=>{setTimeout(e,t)})}const Cz=/^[cdef][\w-]{21}$/,Kp="";function Tz(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function bz(t){return function Dz(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Cz.test(n)?n:Kp}catch{return Kp}}function ao(t){return`${t.appName}!${t.appId}`}const co=new Map;function GA(t,e){const n=ao(t);qA(n,e),function Mz(t,e){const n=function KA(){return!Kr&&"BroadcastChannel"in self&&(Kr=new BroadcastChannel("[Firebase] FID Change"),Kr.onmessage=t=>{qA(t.data.key,t.data.fid)}),Kr}();n&&n.postMessage({key:t,fid:e}),function YA(){0===co.size&&Kr&&(Kr.close(),Kr=null)}()}(n,e)}function qA(t,e){const n=co.get(t);if(n)for(const r of n)r(e)}let Kr=null;const Nz="firebase-installations-database",Rz=1,Yr="firebase-installations-store";let Yp=null;function Qp(){return Yp||(Yp=function fz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=cr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(cr(s.result),c.oldVersion,c.newVersion,cr(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(Nz,Rz,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Yr)}})),Yp}function Tu(t,e){return Zp.apply(this,arguments)}function Zp(){return(Zp=g(function*(t,e){const n=ao(t),i=(yield Qp()).transaction(Yr,"readwrite"),o=i.objectStore(Yr),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&GA(t,e.fid),e})).apply(this,arguments)}function Jp(t){return Xp.apply(this,arguments)}function Xp(){return(Xp=g(function*(t){const e=ao(t),r=(yield Qp()).transaction(Yr,"readwrite");yield r.objectStore(Yr).delete(e),yield r.done})).apply(this,arguments)}function Rs(t,e){return eg.apply(this,arguments)}function eg(){return(eg=g(function*(t,e){const n=ao(t),i=(yield Qp()).transaction(Yr,"readwrite"),o=i.objectStore(Yr),s=yield o.get(n),a=e(s);return void 0===a?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&GA(t,a.fid),a})).apply(this,arguments)}function tg(t){return ng.apply(this,arguments)}function ng(){return ng=g(function*(t){let e;const n=yield Rs(t.appConfig,r=>{const i=function Pz(t){return ZA(t||{fid:Tz(),registrationStatus:0})}(r),o=function kz(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Bn.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function xz(t,e){return rg.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Oz(t)}:{installationEntry:e}}(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===Kp?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),ng.apply(this,arguments)}function rg(){return rg=g(function*(t,e){try{const n=yield function wz(t,e){return qp.apply(this,arguments)}(t,e);return Tu(t.appConfig,n)}catch(n){throw HA(n)&&409===n.customData.serverCode?yield Jp(t.appConfig):yield Tu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),rg.apply(this,arguments)}function Oz(t){return ig.apply(this,arguments)}function ig(){return(ig=g(function*(t){let e=yield QA(t.appConfig);for(;1===e.registrationStatus;)yield zA(100),e=yield QA(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield tg(t);return r||n}return e})).apply(this,arguments)}function QA(t){return Rs(t,e=>{if(!e)throw Bn.create("installation-not-found");return ZA(e)})}function ZA(t){return function Lz(t){return 1===t.registrationStatus&&t.registrationTime+VA<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function og(){return(og=g(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function Vz(t,{fid:e}){return`${$p(t)}/${e}/authTokens:generate`}(t,n),i=function WA(t,{refreshToken:e}){const n=jA(t);return n.append("Authorization",function Iz(t){return`${UA} ${t}`}(e)),n}(t,n),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:BA,appId:t.appId}})},c=yield zp(()=>fetch(r,a));if(c.ok)return $A(yield c.json());throw yield jp("Generate Auth Token",c)})).apply(this,arguments)}function sg(t){return ag.apply(this,arguments)}function ag(){return ag=g(function*(t,e=!1){let n;const r=yield Rs(t.appConfig,o=>{if(!XA(o))throw Bn.create("not-registered");const s=o.authToken;if(!e&&function Hz(t){return 2===t.requestStatus&&!function $z(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+mz}(t)}(s))return o;if(1===s.requestStatus)return n=function Bz(t,e){return cg.apply(this,arguments)}(t,e),o;{if(!navigator.onLine)throw Bn.create("app-offline");const a=function jz(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(o);return n=function Uz(t,e){return ug.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),ag.apply(this,arguments)}function cg(){return(cg=g(function*(t,e){let n=yield JA(t.appConfig);for(;1===n.authToken.requestStatus;)yield zA(100),n=yield JA(t.appConfig);const r=n.authToken;return 0===r.requestStatus?sg(t,e):r})).apply(this,arguments)}function JA(t){return Rs(t,e=>{if(!XA(e))throw Bn.create("not-registered");return function Wz(t){return 1===t.requestStatus&&t.requestTime+VA<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ug(){return ug=g(function*(t,e){try{const n=yield function Fz(t,e){return og.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Tu(t.appConfig,r),n}catch(n){if(!HA(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Tu(t.appConfig,r)}else yield Jp(t.appConfig);throw n}}),ug.apply(this,arguments)}function XA(t){return void 0!==t&&2===t.registrationStatus}function lg(){return(lg=g(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield tg(e);return r?r.catch(console.error):sg(e).catch(console.error),n.fid})).apply(this,arguments)}function dg(){return dg=g(function*(t,e=!1){const n=t;return yield function qz(t){return fg.apply(this,arguments)}(n),(yield sg(n,e)).token}),dg.apply(this,arguments)}function fg(){return(fg=g(function*(t){const{registrationPromise:e}=yield tg(t);e&&(yield e)})).apply(this,arguments)}function gg(t){return Bn.create("missing-app-config-values",{valueName:t})}const e0="installations",Jz=t=>{const e=t.getProvider("app").getImmediate(),n=function Qz(t){if(!t||!t.options)throw gg("App Configuration");if(!t.name)throw gg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw gg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Gr(e,"heartbeat"),_delete:()=>Promise.resolve()}},Xz=t=>{const n=Gr(t.getProvider("app").getImmediate(),e0).getImmediate();return{getId:()=>function zz(t){return lg.apply(this,arguments)}(n),getToken:i=>function Gz(t){return dg.apply(this,arguments)}(n,i)}};(function eG(){st(new et(e0,Jz,"PUBLIC")),st(new et("installations-internal",Xz,"PRIVATE"))})(),_e(FA,Hp),_e(FA,Hp,"esm2017");const mg="@firebase/remote-config",n0="remote-config",Et=new hn("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function aG(t=Cu()){return Gr(t=vt(t),n0).getImmediate()}class fG{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return g(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const o=yield n.client.fetch(e),s=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&s.push(n.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(s),o})()}}function hG(t=navigator){return t.languages&&t.languages[0]||t.language}class pG{constructor(e,n,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){var n=this;return g(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:hG()},u={method:"POST",headers:a,body:JSON.stringify(c)},l=fetch(s,u),d=new Promise((v,_)=>{e.signal.addEventListener(()=>{const T=new Error("The operation was aborted.");T.name="AbortError",_(T)})});let f;try{yield Promise.race([l,d]),f=yield l}catch(v){let _="fetch-client-network";throw"AbortError"===v?.name&&(_="fetch-timeout"),Et.create(_,{originalErrorMessage:v?.message})}let h=f.status;const p=f.headers.get("ETag")||void 0;let m,y;if(200===f.status){let v;try{v=yield f.json()}catch(_){throw Et.create("fetch-client-parse",{originalErrorMessage:_?.message})}m=v.entries,y=v.state}if("INSTANCE_STATE_UNSPECIFIED"===y?h=500:"NO_CHANGE"===y?h=304:("NO_TEMPLATE"===y||"EMPTY_CONFIG"===y)&&(m={}),304!==h&&200!==h)throw Et.create("fetch-status",{httpStatus:h});return{status:h,eTag:p,config:m}})()}}class _G{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return g(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return g(function*(){yield function gG(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Et.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const o=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),o}catch(o){if(!function mG(t){if(!(t instanceof Yt&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o))throw o;const s={throttleEndTimeMillis:Date.now()+wp(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(s),i.attemptFetch(e,s)}})()}}class EG{constructor(e,n,r,i,o){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Su(t,e){const n=t.target.error||void 0;return Et.create(e,{originalErrorMessage:n&&n?.message})}const Qr="app_namespace_store";class CG{constructor(e,n,r,i=function DG(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(Su(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Qr,{keyPath:"compositeKey"})}}catch(n){e(Et.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return g(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Qr],"readonly").objectStore(Qr),c=n.createCompositeKey(e);try{const u=a.get(c);u.onerror=l=>{o(Su(l,"storage-get"))},u.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(u){o(Et.create("storage-get",{originalErrorMessage:u?.message}))}})})()}set(e,n){var r=this;return g(function*(){const i=yield r.openDbPromise;return new Promise((o,s)=>{const c=i.transaction([Qr],"readwrite").objectStore(Qr),u=r.createCompositeKey(e);try{const l=c.put({compositeKey:u,value:n});l.onerror=d=>{s(Su(d,"storage-set"))},l.onsuccess=()=>{o()}}catch(l){s(Et.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return g(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Qr],"readwrite").objectStore(Qr),c=n.createCompositeKey(e);try{const u=a.delete(c);u.onerror=l=>{o(Su(l,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){o(Et.create("storage-delete",{originalErrorMessage:u?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class TG{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return g(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),o=yield n;o&&(e.lastFetchStatus=o);const s=yield r;s&&(e.lastSuccessfulFetchTimestampMillis=s);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function SG(){return Ig.apply(this,arguments)}function Ig(){return(Ig=g(function*(){if(!$r())return!1;try{return yield Ss()}catch{return!1}})).apply(this,arguments)}!function bG(){st(new et(n0,function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Et.create("registration-window");if(!$r())throw Et.create("indexed-db-unavailable");const{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw Et.create("registration-project-id");if(!s)throw Et.create("registration-api-key");if(!a)throw Et.create("registration-app-id");const c=new CG(a,r.name,n=n||"firebase"),u=new TG(c),l=new so(mg);l.logLevel=V.ERROR;const d=new pG(i,qr,n,o,s,a),f=new _G(d,c),h=new fG(f,c,u,l),p=new EG(r,h,u,c,l);return function uG(t){const e=vt(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),_e(mg,"0.4.4"),_e(mg,"0.4.4","esm2017")}();const AG=(t,e)=>e.some(n=>t instanceof n);let o0,s0;const a0=new WeakMap,wg=new WeakMap,c0=new WeakMap,Dg=new WeakMap,Cg=new WeakMap;let Tg={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return wg.get(t);if("objectStoreNames"===e)return t.objectStoreNames||c0.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function OG(t){return"function"==typeof t?function xG(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function NG(){return s0||(s0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(bg(this),e),Un(a0.get(this))}:function(...e){return Un(t.apply(bg(this),e))}:function(e,...n){const r=t.call(bg(this),e,...n);return c0.set(r,e.sort?e.sort():[e]),Un(r)}}(t):(t instanceof IDBTransaction&&function PG(t){if(wg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});wg.set(t,e)}(t),AG(t,function MG(){return o0||(o0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,Tg):t)}function Un(t){if(t instanceof IDBRequest)return function RG(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Un(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&a0.set(n,t)}).catch(()=>{}),Cg.set(e,t),e}(t);if(Dg.has(t))return Dg.get(t);const e=OG(t);return e!==t&&(Dg.set(t,e),Cg.set(e,t)),e}const bg=t=>Cg.get(t);function u0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Un(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Un(s.result),c.oldVersion,c.newVersion,Un(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function Sg(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Un(n).then(()=>{})}const LG=["get","getKey","getAll","getAllKeys","count"],FG=["put","add","delete","clear"],Ag=new Map;function l0(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ag.get(e))return Ag.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FG.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!LG.includes(n))return;const o=function(){var s=g(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return Ag.set(e,o),o}!function kG(t){Tg=t(Tg)}(t=>({...t,get:(e,n,r)=>l0(e,n)||t.get(e,n,r),has:(e,n)=>!!l0(e,n)||t.has(e,n)}));const VG="/firebase-messaging-sw.js",BG="/firebase-cloud-messaging-push-scope",d0="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",UG="https://fcmregistrations.googleapis.com/v1",f0="google.c.a.c_id",HG="google.c.a.c_l",$G="google.c.a.ts";var ur=(()=>((ur=ur||{}).PUSH_RECEIVED="push-received",ur.NOTIFICATION_CLICKED="notification-clicked",ur))();function Hn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function WG(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const Mg="fcm_token_details_db",zG=5,h0="fcm_token_object_Store";function Ng(){return Ng=g(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(Mg))return null;let e=null;return(yield u0(Mg,zG,{upgrade:(r=g(function*(i,o,s,a){var c;if(o<2||!i.objectStoreNames.contains(h0))return;const u=a.objectStore(h0),l=yield u.index("fcmSenderId").get(t);if(yield u.clear(),l)if(2===o){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Hn(d.vapidKey)}}}else if(3===o){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Hn(d.auth),p256dh:Hn(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Hn(d.vapidKey)}}}else if(4===o){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Hn(d.auth),p256dh:Hn(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Hn(d.vapidKey)}}}}),function(o,s,a,c){return r.apply(this,arguments)})})).close(),yield Sg(Mg),yield Sg("fcm_vapid_details_db"),yield Sg("undefined"),function qG(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Ng.apply(this,arguments)}const KG="firebase-messaging-database",YG=1,Zr="firebase-messaging-store";let Rg=null;function Pg(){return Rg||(Rg=u0(KG,YG,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Zr)}})),Rg}function p0(t){return kg.apply(this,arguments)}function kg(){return kg=g(function*(t){const e=Fg(t),r=yield(yield Pg()).transaction(Zr).objectStore(Zr).get(e);if(r)return r;{const i=yield function GG(t){return Ng.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield xg(t,i),i}}),kg.apply(this,arguments)}function xg(t,e){return Og.apply(this,arguments)}function Og(){return(Og=g(function*(t,e){const n=Fg(t),i=(yield Pg()).transaction(Zr,"readwrite");return yield i.objectStore(Zr).put(e,n),yield i.done,e})).apply(this,arguments)}function Lg(){return(Lg=g(function*(t){const e=Fg(t),r=(yield Pg()).transaction(Zr,"readwrite");yield r.objectStore(Zr).delete(e),yield r.done})).apply(this,arguments)}function Fg({appConfig:t}){return t.appId}const Ge=new hn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function JG(t,e){return Vg.apply(this,arguments)}function Vg(){return(Vg=g(function*(t,e){const n=yield $g(t),r=m0(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(Hg(t.appConfig),i)).json()}catch(s){throw Ge.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error)throw Ge.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Ge.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function Bg(){return(Bg=g(function*(t,e){const n=yield $g(t),r=m0(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${Hg(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw Ge.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error)throw Ge.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Ge.create("token-update-no-token");return o.token})).apply(this,arguments)}function g0(t,e){return Ug.apply(this,arguments)}function Ug(){return(Ug=g(function*(t,e){const r={method:"DELETE",headers:yield $g(t)};try{const o=yield(yield fetch(`${Hg(t.appConfig)}/${e}`,r)).json();if(o.error)throw Ge.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw Ge.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function Hg({projectId:t}){return`${UG}/projects/${t}/registrations`}function $g(t){return jg.apply(this,arguments)}function jg(){return(jg=g(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function m0({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==d0&&(i.web.applicationPubKey=r),i}const e3=6048e5;function Wg(){return Wg=g(function*(t){const e=yield function r3(t,e){return Kg.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Hn(e.getKey("auth")),p256dh:Hn(e.getKey("p256dh"))},r=yield p0(t.firebaseDependencies);if(r){if(function i3(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+e3?function n3(t,e){return Gg.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield g0(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return y0(t.firebaseDependencies,n)}return y0(t.firebaseDependencies,n)}),Wg.apply(this,arguments)}function zg(){return zg=g(function*(t){const e=yield p0(t.firebaseDependencies);e&&(yield g0(t.firebaseDependencies,e.token),yield function QG(t){return Lg.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),zg.apply(this,arguments)}function Gg(){return Gg=g(function*(t,e){try{const n=yield function XG(t,e){return Bg.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield xg(t.firebaseDependencies,r),n}catch(n){throw yield function _0(t){return zg.apply(this,arguments)}(t),n}}),Gg.apply(this,arguments)}function y0(t,e){return qg.apply(this,arguments)}function qg(){return(qg=g(function*(t,e){const r={token:yield JG(t,e),createTime:Date.now(),subscriptionOptions:e};return yield xg(t,r),r.token})).apply(this,arguments)}function Kg(){return(Kg=g(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:WG(e)})})).apply(this,arguments)}function v0(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function o3(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const o=e.notification.icon;o&&(t.notification.icon=o)}(e,t),function s3(t,e){e.data&&(t.data=e.data)}(e,t),function a3(t,e){var n,r,i,o,s;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;a&&(t.fcmOptions.link=a);const c=null===(s=e.fcmOptions)||void 0===s?void 0:s.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}(e,t),e}function E0(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Yg(t){return Ge.create("missing-app-config-values",{valueName:t})}E0("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),E0("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class l3{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function u3(t){if(!t||!t.options)throw Yg("App Configuration Object");if(!t.name)throw Yg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Yg(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Qg(){return(Qg=g(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(VG,{scope:BG}),t.swRegistration.update().catch(()=>{})}catch(e){throw Ge.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function Zg(){return(Zg=g(function*(t,e){if(!e&&!t.swRegistration&&(yield function I0(t){return Qg.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Ge.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function Jg(){return(Jg=g(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=d0)})).apply(this,arguments)}function Xg(){return Xg=g(function*(t,e){if(!navigator)throw Ge.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ge.create("permission-blocked");return yield function f3(t,e){return Jg.apply(this,arguments)}(t,e?.vapidKey),yield function d3(t,e){return Zg.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function t3(t){return Wg.apply(this,arguments)}(t)}),Xg.apply(this,arguments)}function em(){return(em=g(function*(t,e,n){const r=function p3(t){switch(t){case ur.NOTIFICATION_CLICKED:return"notification_open";case ur.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[f0],message_name:n[HG],message_time:n[$G],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tm(){return tm=g(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===ur.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(v0(n)):t.onMessageHandler.next(v0(n)));const r=n.data;(function c3(t){return"object"==typeof t&&!!t&&f0 in t})(r)&&"1"===r["google.c.a.e"]&&(yield function h3(t,e,n){return em.apply(this,arguments)}(t,n.messageType,r))}),tm.apply(this,arguments)}const D0="@firebase/messaging",m3=t=>{const e=new l3(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function g3(t,e){return tm.apply(this,arguments)}(e,n)),e},_3=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function w0(t,e){return Xg.apply(this,arguments)}(e,r)}};function T0(){return nm.apply(this,arguments)}function nm(){return(nm=g(function*(){try{yield Ss()}catch{return!1}return typeof window<"u"&&$r()&&vp()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function y3(){st(new et("messaging",m3,"PUBLIC")),st(new et("messaging-internal",_3,"PRIVATE")),_e(D0,"0.12.4"),_e(D0,"0.12.4","esm2017")}();const Au="analytics",I3="firebase_id",w3="origin",D3=6e4,C3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",om="https://www.googletagmanager.com/gtag/js",Be=new so("@firebase/analytics"),at=new hn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function b3(t){if(!t.startsWith(om)){const e=at.create("invalid-gtag-resource",{gtagURL:t});return Be.warn(e.message),""}return t}function b0(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function sm(){return(sm=g(function*(t,e,n,r,i,o){const s=r[i];try{if(s)yield e[s];else{const c=(yield b0(n)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){Be.error(a)}t("config",i,o)})).apply(this,arguments)}function am(){return(am=g(function*(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield b0(n);for(const c of s){const u=a.find(d=>d.measurementId===c),l=u&&e[u.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){Be.error(o)}})).apply(this,arguments)}const O3=30,S0=new class F3{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function V3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function cm(){return(cm=g(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:V3(r)},o=C3.replace("{app-id}",n),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw at.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function um(){return(um=g(function*(t,e=S0,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw at.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw at.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new j3;return setTimeout(g(function*(){a.abort()}),void 0!==n?n:D3),A0({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function A0(t,e,n){return lm.apply(this,arguments)}function lm(){return lm=g(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=S0){var o;const{appId:s,measurementId:a}=t;try{yield function H3(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(at.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(c){if(a)return Be.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw c}try{const c=yield function B3(t){return cm.apply(this,arguments)}(t);return i.deleteThrottleMetadata(s),c}catch(c){const u=c;if(!function $3(t){if(!(t instanceof Yt&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(i.deleteThrottleMetadata(s),a)return Be.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw c}const l=503===Number(null===(o=u?.customData)||void 0===o?void 0:o.httpStatus)?wp(n,i.intervalMillis,O3):wp(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(s,d),Be.debug(`Calling attemptFetch again in ${l} millis`),A0(t,d,r,i)}}),lm.apply(this,arguments)}class j3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let dm,ym;function fm(){return(fm=g(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const o=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function vm(){return(vm=g(function*(){if(!$r())return Be.warn(at.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Ss()}catch(t){return Be.warn(at.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function Em(){return Em=g(function*(t,e,n,r,i,o,s){var a;const c=function U3(t){return um.apply(this,arguments)}(t);c.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&Be.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Be.error(h)),e.push(c);const u=function Q3(){return vm.apply(this,arguments)}().then(h=>{if(h)return r.getId()}),[l,d]=yield Promise.all([c,u]);(function x3(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(om)&&n.src.includes(t))return n;return null})(o)||function A3(t,e){const n=function S3(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:b3}),r=document.createElement("script"),i=`${om}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,l.measurementId),ym&&(i("consent","default",ym),function M0(t){ym=t}(void 0)),i("js",new Date);const f=null!==(a=s?.config)&&void 0!==a?a:{};return f[w3]="firebase",f.update=!0,null!=d&&(f[I3]=d),i("config",l.measurementId,f),dm&&(i("set",dm),function N0(t){dm=t}(void 0)),l.measurementId}),Em.apply(this,arguments)}class J3{constructor(e){this.app=e}_delete(){return delete pn[this.app.options.appId],Promise.resolve()}}let pn={},R0=[];const P0={};let x0,gn,Mu="dataLayer",Im=!1;function e8(t,e,n){!function X3(){const t=[];if(yp()&&t.push("This is a browser extension environment."),vp()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=at.create("invalid-analytics-context",{errorInfo:e});Be.warn(n.message)}}();const r=t.options.appId;if(!r)throw at.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw at.create("no-api-key");Be.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pn[r])throw at.create("already-exists",{id:r});if(!Im){!function M3(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Mu);const{wrappedGtag:o,gtagCore:s}=function k3(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function P3(t,e,n,r){function o(){return o=g(function*(s,...a){try{if("event"===s){const[c,u]=a;yield function R3(t,e,n,r,i){return am.apply(this,arguments)}(t,e,n,c,u)}else if("config"===s){const[c,u]=a;yield function N3(t,e,n,r,i,o){return sm.apply(this,arguments)}(t,e,n,r,c,u)}else if("consent"===s){const[c]=a;t("consent","update",c)}else if("get"===s){const[c,u,l]=a;t("get",c,u,l)}else if("set"===s){const[c]=a;t("set",c)}else t(s,...a)}catch(c){Be.error(c)}}),o.apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(pn,R0,P0,Mu,"gtag");gn=o,x0=s,Im=!0}return pn[r]=function Z3(t,e,n,r,i,o,s){return Em.apply(this,arguments)}(t,R0,P0,e,x0,Mu,n),new J3(t)}function n8(){return wm.apply(this,arguments)}function wm(){return(wm=g(function*(){if(yp()||!vp()||!$r())return!1;try{return yield Ss()}catch{return!1}})).apply(this,arguments)}const O0="@firebase/analytics";!function i8(){st(new et(Au,(e,{options:n})=>e8(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),st(new et("analytics-internal",function t(e){try{const n=e.getProvider(Au).getImmediate();return{logEvent:(r,i,o)=>function r8(t,e,n,r){t=vt(t),function W3(t,e,n,r,i){return fm.apply(this,arguments)}(gn,pn[t.app.options.appId],e,n,r).catch(i=>Be.error(i))}(n,r,i,o)}}catch(n){throw at.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),_e(O0,"0.10.0"),_e(O0,"0.10.0","esm2017")}();class o8 extends Bt{constructor(e,n){super()}schedule(e,n=0){return this}}const Nu={setInterval(t,e,...n){const{delegate:r}=Nu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Nu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class F0 extends o8{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Nu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Nu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pi(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const V0={now:()=>(V0.delegate||Date).now(),delegate:void 0};class Ps{constructor(e,n=Ps.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Ps.now=V0.now;class B0 extends Ps{constructor(e,n=Ps.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const c8=new class a8 extends B0{}(class s8 extends F0{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),u8=new B0(F0),ks=new bc("7.6.1"),Cm="__angularfire_symbol__analyticsIsSupportedValue",Tm="__angularfire_symbol__analyticsIsSupported",bm="__angularfire_symbol__remoteConfigIsSupportedValue",Sm="__angularfire_symbol__remoteConfigIsSupported",Am="__angularfire_symbol__messagingIsSupportedValue",Mm="__angularfire_symbol__messagingIsSupported";globalThis[Tm]||(globalThis[Tm]=n8().then(t=>globalThis[Cm]=t).catch(()=>globalThis[Cm]=!1)),globalThis[Mm]||(globalThis[Mm]=T0().then(t=>globalThis[Am]=t).catch(()=>globalThis[Am]=!1)),globalThis[Sm]||(globalThis[Sm]=SG().then(t=>globalThis[bm]=t).catch(()=>globalThis[bm]=!1));const Ru={async:()=>globalThis[Sm],sync:()=>{const t=globalThis[bm];if(void 0===t)throw new Error((t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`)("RemoteConfig"));return t}};function Pu(t,e,n){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}const ku=(t,e)=>{const n=e?[e]:bA(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};function uo(){}class U0{constructor(e,n=c8){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class d8{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",uo,{},uo,uo)),n.pipe(function l8(t,e,n){const r=he(t)||e||n?{next:t,error:e,complete:n}:t;return r?br((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(gi(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Ta}({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xu=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new U0(Zone.current)),this.insideAngular=n.run(()=>new U0(Zone.current,u8)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(q(de))},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Jr(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Xr(t){return Jr().ngZone.run(()=>t())}function h8(t){return Jr(),function p8(t){return function(n){return(n=n.lift(new d8(t.ngZone))).pipe(Aa(t.outsideAngular),Sa(t.insideAngular))}}(Jr())(t)}const g8=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Xr(()=>t.apply(void 0,r))},lo=(t,e)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(n||(n=Xr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",uo,{},uo,uo)))),r[o]=g8(r[o],n));const i=function f8(t){return Jr().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof Ke){const o=Jr();return i.pipe(Aa(o.outsideAngular),Sa(o.insideAngular))}return Xr(()=>i)}return i instanceof Ke?i.pipe(h8):i instanceof Promise?Xr(()=>new Promise((o,s)=>i.then(a=>Xr(()=>o(a)),a=>Xr(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Xr(()=>i)};class ei{constructor(e){return e}}class Ou{constructor(){return bA()}}const Rm=new M("angularfire2._apps"),_8={provide:ei,useFactory:function m8(t){return t&&1===t.length?t[0]:new ei(Cu())},deps:[[new Ze,Rm]]},y8={provide:Ou,deps:[[new Ze,Rm]]};function v8(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new ei(r)}}let E8=(()=>{class t{constructor(n){_e("angularfire",ks.full,"core"),_e("angularfire",ks.full,"app"),_e("angular",CD.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(q(rr))},t.\u0275mod=Tn({type:t}),t.\u0275inj=Xt({providers:[_8,y8]}),t})();function I8(t,...e){return{ngModule:E8,providers:[{provide:Rm,useFactory:v8(t),multi:!0,deps:[de,jt,xu,...e]}]}}const w8=lo(TA,!0),Pm=new Map,H0={activated:!1,tokenObservers:[]},D8={initialized:!1,enabled:!1};function we(t){return Pm.get(t)||Object.assign({},H0)}function Lu(){return D8}const km="https://content-firebaseappcheck.googleapis.com/v1",S8="exchangeDebugToken",$0={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class M8{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return g(function*(){n.stop();try{n.pending=new Hr,yield function N8(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new Hr,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const qe=new hn("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xm(t){if(!we(t).activated)throw qe.create("use-before-activation",{appName:t.name})}function Bu(t,e){return Lm.apply(this,arguments)}function Lm(){return(Lm=g(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const o={method:"POST",body:JSON.stringify(e),headers:r};let s,a;try{s=yield fetch(t,o)}catch(d){throw qe.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==s.status)throw qe.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(d){throw qe.create("fetch-parse-error",{originalErrorMessage:d?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw qe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}function j0(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${km}/projects/${n}/apps/${r}:${S8}?key=${i}`,body:{debug_token:e}}}const x8="firebase-app-check-database",O8=1,xs="firebase-app-check-store";let Uu=null;function Fm(){return(Fm=g(function*(t,e){const r=(yield function z0(){return Uu||(Uu=new Promise((t,e)=>{try{const n=indexedDB.open(x8,O8);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(qe.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(xs,{keyPath:"compositeKey"})}}catch(n){e(qe.create("storage-open",{originalErrorMessage:n?.message}))}}),Uu)}()).transaction(xs,"readwrite"),o=r.objectStore(xs).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(qe.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const Os=new so("@firebase/app-check");function Um(t,e){return $r()?function F8(t,e){return function G0(t,e){return Fm.apply(this,arguments)}(function K0(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{Os.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function $m(){return Lu().enabled}function jm(){return Wm.apply(this,arguments)}function Wm(){return(Wm=g(function*(){const t=Lu();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const j8={error:"UNKNOWN_ERROR"};function W8(t){return pu.encodeString(JSON.stringify(t),!1)}function Hu(t){return zm.apply(this,arguments)}function zm(){return(zm=g(function*(t,e=!1){const n=t.app;xm(n);const r=we(n);let o,i=r.token;if(i&&!fo(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(fo(c)?i=c:yield Um(n,void 0))}if(!e&&i&&fo(i))return{token:i.token};let a,s=!1;if($m()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Bu(j0(n,yield jm()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const c=yield r.exchangeTokenPromise;return yield Um(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield we(n).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?Os.warn(c.message):Os.error(c),o=c}return i?o?a=fo(i)?{token:i.token,internalError:o}:J0(o):(a={token:i.token},r.token=i,yield Um(n,i)):a=J0(o),s&&function Z0(t,e){const n=we(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a})).apply(this,arguments)}function Y0(t){return Gm.apply(this,arguments)}function Gm(){return(Gm=g(function*(t){const e=t.app;xm(e);const{provider:n}=we(e);if($m()){const r=yield jm(),{token:i}=yield Bu(j0(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function Km(t,e){const n=we(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Q0(t){const{app:e}=t,n=we(e);let r=n.tokenRefresher;r||(r=function z8(t){const{app:e}=t;return new M8(g(function*(){let r;if(r=we(e).token?yield Hu(t,!0):yield Hu(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=we(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},$0.RETRIAL_MIN_WAIT,$0.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function fo(t){return t.expireTimeMillis-Date.now()>0}function J0(t){return{token:W8(j8),error:t}}class G8{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=we(this.app);for(const n of e)Km(this.app,n.next);return Promise.resolve()}}const sM="app-check-internal";!function s6(){st(new et("app-check",t=>function q8(t,e){return new G8(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(sM).initialize()})),st(new et(sM,t=>function K8(t){return{getToken:e=>Hu(t,e),getLimitedUseToken:()=>Y0(t),addTokenListener:e=>function qm(t,e,n,r){const{app:i}=t,o=we(i);if(o.tokenObservers=[...o.tokenObservers,{next:n,error:r,type:e}],o.token&&fo(o.token)){const a=o.token;Promise.resolve().then(()=>{n({token:a.token}),Q0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Q0(t))}(t,"INTERNAL",e),removeTokenListener:e=>Km(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),_e("@firebase/app-check","0.8.0")}();class Jm{constructor(){return ku("app-check")}}typeof window<"u"&&window;const d6=function cM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},uM=new hn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ju=new so("@firebase/auth");function Wu(t,...e){ju.logLevel<=V.ERROR&&ju.error(`Auth (${qr}): ${t}`,...e)}function It(t,...e){throw e_(t,...e)}function mn(t,...e){return e_(t,...e)}function e_(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uM.create(t,...e)}function I(t,e,...n){if(!t)throw e_(e,...n)}function _n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wu(e),new Error(e)}function lr(t,e){t||_n(e)}function Ls(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function dM(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Fs{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=_p()||mA()}get(){return function h6(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function t_(){return"http:"===dM()||"https:"===dM()}()||yp()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function n_(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class fM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const g6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},m6=new Fs(3e4,6e4);function ye(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function De(t,e,n,r){return r_.apply(this,arguments)}function r_(){return(r_=g(function*(t,e,n,r,i={}){return hM(t,i,g(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Ms(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),fM.fetch()(pM(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function hM(t,e,n){return i_.apply(this,arguments)}function i_(){return(i_=g(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},g6),e);try{const i=new _6(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Vs(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Vs(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Vs(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw Vs(t,"user-disabled",s);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw function lM(t,e,n){const r=Object.assign(Object.assign({},d6()),{[e]:n});return new hn("auth","Firebase",r).create(e,{appName:t.name})}(t,l,u);It(t,l)}}catch(i){if(i instanceof Yt)throw i;It(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function o_(){return(o_=g(function*(t,e,n,r,i={}){const o=yield De(t,e,n,r,i);return"mfaPendingCredential"in o&&It(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function pM(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?n_(t.config,i):`${t.config.apiScheme}://${i}`}class _6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mn(this.auth,"network-request-failed")),m6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vs(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mn(t,e,r);return i.customData._tokenResponse=n,i}function s_(){return(s_=g(function*(t,e){return De(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function c_(){return(c_=g(function*(t,e){return De(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Bs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function u_(){return(u_=g(function*(t,e=!1){const n=vt(t),r=yield n.getIdToken(e),i=zu(r);I(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Bs(l_(i.auth_time)),issuedAtTime:Bs(l_(i.iat)),expirationTime:Bs(l_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function l_(t){return 1e3*Number(t)}function zu(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const i=mu(n);return i?JSON.parse(i):(Wu("Failed to decode base64 JWT payload"),null)}catch(i){return Wu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jn(t,e){return d_.apply(this,arguments)}function d_(){return(d_=g(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Yt&&function D6({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class C6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(g(function*(){yield n.iteration()}),r)}iteration(){var e=this;return g(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class gM{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bs(this.lastLoginAt),this.creationTime=Bs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Us(t){return f_.apply(this,arguments)}function f_(){return f_=g(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield jn(t,function E6(t,e){return c_.apply(this,arguments)}(n,{idToken:r}));I(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function S6(t){return t.map(e=>{var{providerId:n}=e,r=Kl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],a=function b6(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),l=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new gM(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),f_.apply(this,arguments)}function h_(){return(h_=g(function*(t){const e=vt(t);yield Us(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function p_(){return(p_=g(function*(t,e){const n=yield hM(t,{},g(function*(){const r=Ms({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=pM(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fM.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Hs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(typeof e.idToken<"u","internal-error"),I(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function w6(t){const e=zu(t);return I(e,"internal-error"),I(typeof e.exp<"u","internal-error"),I(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return g(function*(){return I(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return g(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function A6(t,e){return p_.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Hs;return r&&(I("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(I("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(I("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hs,this.toJSON())}_performRefresh(){return _n("not implemented")}}function dr(t,e){I("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Kl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gM(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return g(function*(){const r=yield jn(n,n.stsTokenManager.getToken(n.auth,e));return I(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function I6(t){return u_.apply(this,arguments)}(this,e)}reload(){return function T6(t){return h_.apply(this,arguments)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return g(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Us(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return g(function*(){const n=yield e.getIdToken();return yield jn(e,function y6(t,e){return s_.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,h=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=n.photoURL)&&void 0!==s?s:void 0,m=null!==(a=n.tenantId)&&void 0!==a?a:void 0,y=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,v=null!==(u=n.createdAt)&&void 0!==u?u:void 0,_=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:T,emailVerified:S,isAnonymous:H,providerData:ut,stsTokenManager:va}=n;I(T&&va,e,"internal-error");const j9=Hs.fromJSON(this.name,va);I("string"==typeof T,e,"internal-error"),dr(d,e.name),dr(f,e.name),I("boolean"==typeof S,e,"internal-error"),I("boolean"==typeof H,e,"internal-error"),dr(h,e.name),dr(p,e.name),dr(m,e.name),dr(y,e.name),dr(v,e.name),dr(_,e.name);const vE=new ti({uid:T,auth:e,email:f,emailVerified:S,displayName:d,isAnonymous:H,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:j9,createdAt:v,lastLoginAt:_});return ut&&Array.isArray(ut)&&(vE.providerData=ut.map(W9=>Object.assign({},W9))),y&&(vE._redirectEventId=y),vE}static _fromIdTokenResponse(e,n,r=!1){return g(function*(){const i=new Hs;i.updateFromServerResponse(n);const o=new ti({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Us(o),o})()}}const mM=new Map;function Wn(t){lr(t instanceof Function,"Expected a class definition");let e=mM.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mM.set(t,e),e)}const _M=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(function*(){return!0})()}_set(n,r){var i=this;return g(function*(){i.storage[n]=r})()}_get(n){var r=this;return g(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return g(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Gu(t,e,n){return`firebase:${t}:${e}:${n}`}class po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Gu(this.userKey,i.apiKey,o),this.fullPersistenceKey=Gu("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return g(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?ti._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return g(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return g(function*(){if(!n.length)return new po(Wn(_M),e,r);const i=(yield Promise.all(n.map(function(){var u=g(function*(l){if(yield l._isAvailable())return l});return function(l){return u.apply(this,arguments)}}()))).filter(u=>u);let o=i[0]||Wn(_M);const s=Gu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const l=yield u._get(s);if(l){const d=ti._fromJSON(e,l);u!==o&&(a=d),o=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return o._shouldAllowMigration&&c.length?(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(function(){var u=g(function*(l){if(l!==o)try{yield l._remove(s)}catch{}});return function(l){return u.apply(this,arguments)}}())),new po(o,e,r)):new po(o,e,r)})()}}function yM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DM(e))return"Blackberry";if(CM(e))return"Webos";if(g_(e))return"Safari";if((e.includes("chrome/")||EM(e))&&!e.includes("edge/"))return"Chrome";if(wM(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function vM(t=Ve()){return/firefox\//i.test(t)}function g_(t=Ve()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EM(t=Ve()){return/crios\//i.test(t)}function IM(t=Ve()){return/iemobile/i.test(t)}function wM(t=Ve()){return/android/i.test(t)}function DM(t=Ve()){return/blackberry/i.test(t)}function CM(t=Ve()){return/webos/i.test(t)}function qu(t=Ve()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TM(t=Ve()){return qu(t)||wM(t)||CM(t)||DM(t)||/windows phone/i.test(t)||IM(t)}function bM(t,e=[]){let n;switch(t){case"Browser":n=yM(Ve());break;case"Worker":n=`${yM(Ve())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qr}/${r}`}function SM(t,e){return __.apply(this,arguments)}function __(){return(__=g(function*(t,e){return De(t,"GET","/v2/recaptchaConfig",ye(t,e))})).apply(this,arguments)}function MM(t){return void 0!==t&&void 0!==t.enterprise}class NM{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}function y_(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=mn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function k6(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}function RM(t){return`__${t}${Math.floor(1e6*Math.random())}`}class PM{constructor(e){this.type="recaptcha-enterprise",this.auth=Ue(e)}verify(e="verify",n=!1){var r=this;return g(function*(){function o(){return o=g(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=g(function*(u,l){SM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const f=new NM(d);return null==a.tenantId?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,u(f.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(u,l){return c.apply(this,arguments)}}())}),o.apply(this,arguments)}function s(a,c,u){const l=window.grecaptcha;MM(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{c(d)}).catch(()=>{c("NO_RECAPTCHA")})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{(function i(a){return o.apply(this,arguments)})(r.auth).then(u=>{if(!n&&MM(window.grecaptcha))s(u,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));y_("https://www.google.com/recaptcha/enterprise.js?render="+u).then(()=>{s(u,a,c)}).catch(l=>{c(l)})}}).catch(u=>{c(u)})})})()}}class F6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return g(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class V6{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kM(this),this.idTokenSubscription=new kM(this),this.beforeStateQueue=new F6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(g(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield po.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return g(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return g(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return I(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return g(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return g(function*(){try{yield Us(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function p6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return g(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return g(function*(){const r=e?vt(e):null;return r&&I(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return g(function*(){if(!r._deleted)return e&&I(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(g(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return g(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(g(function*(){yield n.assertedPersistence.setPersistence(Wn(e))}))}initializeRecaptchaConfig(){var e=this;return g(function*(){const n=yield SM(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new NM(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new PM(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return g(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return g(function*(){if(!n.redirectPersistenceManager){const r=e&&Wn(e)||n._popupRedirectResolver;I(r,n,"argument-error"),n.redirectPersistenceManager=yield po.create(n,[Wn(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return g(function*(){var r,i;return n._isInitialized&&(yield n.queue(g(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return g(function*(){if(e===n.currentUser)return n.queue(g(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n),s=this._isInitialized?Promise.resolve():this._initializationPromise;return I(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return g(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return g(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return g(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function f6(t,...e){ju.logLevel<=V.WARN&&ju.warn(`Auth (${qr}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Ue(t){return vt(t)}class kM{constructor(e){this.auth=e,this.observer=null,this.addObserver=function jj(t,e){const n=new Wj(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class W6{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _n("not implemented")}_getIdTokenResponse(e){return _n("not implemented")}_linkToIdToken(e,n){return _n("not implemented")}_getReauthenticationResolver(e){return _n("not implemented")}}function zn(t,e){return O_.apply(this,arguments)}function O_(){return(O_=g(function*(t,e){return function $n(t,e,n,r){return o_.apply(this,arguments)}(t,"POST","/v1/accounts:signInWithIdp",ye(t,e))})).apply(this,arguments)}class hr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class iq extends hr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ft{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return g(function*(){const o=yield ti._fromIdTokenResponse(e,r,i),s=BM(r);return new Ft({user:o,providerId:s,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return g(function*(){yield e._updateTokensIfNecessary(r,!0);const i=BM(r);return new Ft({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function BM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ju extends Yt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ju.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ju(e,n,r,i)}}function UM(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Ju._fromErrorAndOperation(t,o,e,r):o})}function z_(){return(z_=g(function*(t,e,n=!1){const r=yield jn(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ft._forOperation(t,"link",r)})).apply(this,arguments)}function q_(){return(q_=g(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const o=yield jn(t,UM(r,i,e,t),n);I(o.idToken,r,"internal-error");const s=zu(o.idToken);I(s,r,"internal-error");const{sub:a}=s;return I(t.uid===a,r,"user-mismatch"),Ft._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&It(r,"user-mismatch"),o}})).apply(this,arguments)}function K_(){return(K_=g(function*(t,e,n=!1){const r="signIn",i=yield UM(t,r,e),o=yield Ft._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const el="__sak";class zM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(el,"1"),this.storage.removeItem(el),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Sq=(()=>{class t extends zM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cq(){const t=Ve();return g_(t)||qu(t)}()&&function R6(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=TM(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function N6(){return function Lj(){const t=Ve();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return g(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return g(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return g(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),GM=(()=>{class t extends zM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Mq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return g(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var d=g(function*(f){return f(i.origin,a)});return function(f){return d.apply(this,arguments)}}()),l=yield function Aq(t){return Promise.all(t.map(function(){var e=g(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function Cy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Nq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return g(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const l=Cy("",20);o.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(f){const h=f;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(h.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:n},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Ne(){return window}function Ty(){return typeof Ne().WorkerGlobalScope<"u"&&"function"==typeof Ne().importScripts}function by(){return(by=g(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const qM="firebaseLocalStorageDb",tl="firebaseLocalStorage",KM="fbase_key";class zs{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nl(t,e){return t.transaction([tl],e?"readwrite":"readonly").objectStore(tl)}function Sy(){const t=indexedDB.open(qM,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tl,{keyPath:KM})}catch(i){n(i)}}),t.addEventListener("success",g(function*(){const r=t.result;r.objectStoreNames.contains(tl)?e(r):(r.close(),yield function Lq(){const t=indexedDB.deleteDatabase(qM);return new zs(t).toPromise()}(),e(yield Sy()))}))})}function YM(t,e,n){return Ay.apply(this,arguments)}function Ay(){return(Ay=g(function*(t,e,n){const r=nl(t,!0).put({[KM]:e,value:n});return new zs(r).toPromise()})).apply(this,arguments)}function My(){return(My=g(function*(t,e){const n=nl(t,!1).get(e),r=yield new zs(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function QM(t,e){const n=nl(t,!0).delete(e);return new zs(n).toPromise()}const Uq=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return g(function*(){return n.db||(n.db=yield Sy()),n.db})()}_withRetries(n){var r=this;return g(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return g(function*(){return Ty()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return g(function*(){n.receiver=Mq._getInstance(function xq(){return Ty()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=g(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=g(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return g(function*(){var r,i;if(n.activeServiceWorker=yield function Pq(){return by.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Nq(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return g(function*(){if(r.sender&&r.activeServiceWorker&&function kq(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return g(function*(){try{if(!indexedDB)return!1;const n=yield Sy();return yield YM(n,el,"1"),yield QM(n,el),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return g(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return g(function*(){return i._withPendingWrite(g(function*(){return yield i._withRetries(o=>YM(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return g(function*(){const i=yield r._withRetries(o=>function Fq(t,e){return My.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return g(function*(){return r._withPendingWrite(g(function*(){return yield r._withRetries(i=>QM(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return g(function*(){const r=yield n._withRetries(s=>{const a=nl(s,!1).getAll();return new zs(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(g(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();RM("rcb"),new Fs(3e4,6e4);class Vy extends W6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zn(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function n4(t){return function jM(t,e){return K_.apply(this,arguments)}(t.auth,new Vy(t),t.bypassAuthState)}function r4(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),function $M(t,e){return q_.apply(this,arguments)}(n,new Vy(t),t.bypassAuthState)}function i4(t){return By.apply(this,arguments)}function By(){return(By=g(function*(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),function W_(t,e){return z_.apply(this,arguments)}(n,new Vy(t),t.bypassAuthState)})).apply(this,arguments)}class o4{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=g(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return g(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(l){n.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n4;case"linkViaPopup":case"linkViaRedirect":return i4;case"reauthViaPopup":case"reauthViaRedirect":return r4;default:It(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Fs(2e3,1e4);const s4="pendingRedirect",Gs=new Map;class a4 extends o4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return g(function*(){let r=Gs.get(n.auth._key());if(!r){try{const o=(yield function c4(t,e){return Wy.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Gs.set(n.auth._key(),r)}return n.bypassAuthState||Gs.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return g(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return g(function*(){})()}cleanUp(){}}function Wy(){return(Wy=g(function*(t,e){const n=function XM(t){return Gu(s4,t.config.apiKey,t.name)}(e),r=function JM(t){return Wn(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function u4(t,e){Gs.set(t._key(),e)}function eN(t,e){return Zy.apply(this,arguments)}function Zy(){return(Zy=g(function*(t,e,n=!1){const r=Ue(t),i=function ri(t,e){return e?Wn(e):(I(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),s=yield new a4(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class p4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function g4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rN(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rN(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(mn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nN(e))}saveEventToCache(e){this.cachedEventUids.add(nN(e)),this.lastProcessedEventTime=Date.now()}}function nN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rN({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function Xy(){return(Xy=g(function*(t,e={}){return De(t,"GET","/v1/projects",e)})).apply(this,arguments)}const _4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y4=/^https?/;function ev(){return ev=g(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function m4(t){return Xy.apply(this,arguments)}(t);for(const n of e)try{if(E4(n))return}catch{}It(t,"unauthorized-domain")}),ev.apply(this,arguments)}function E4(t){const e=Ls(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!y4.test(n))return!1;if(_4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const I4=new Fs(3e4,6e4);function iN(){const t=Ne().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let il=null;const C4=new Fs(5e3,15e3),T4="__/auth/iframe",b4="emulator/auth/iframe",S4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M4(t){const e=t.config;I(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?n_(e,b4):`https://${t.config.authDomain}/${T4}`,r={apiKey:e.apiKey,appName:t.name,v:qr},i=A4.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ms(r).slice(1)}`}function tv(){return tv=g(function*(t){const e=yield function D4(t){return il=il||function w4(t){return new Promise((e,n)=>{var r,i,o;function s(){iN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iN(),n(mn(t,"network-request-failed"))},timeout:I4.get()})}if(null!==(i=null===(r=Ne().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Ne().gapi)||void 0===o||!o.load){const a=RM("iframefcb");return Ne()[a]=()=>{gapi.load?s():n(mn(t,"network-request-failed"))},y_(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw il=null,e})}(t),il}(t),n=Ne().gapi;return I(n,t,"internal-error"),e.open({where:document.body,url:M4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S4,dontclear:!0},r=>new Promise(function(){var i=g(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=mn(t,"network-request-failed"),c=Ne().setTimeout(()=>{s(a)},C4.get());function u(){Ne().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),tv.apply(this,arguments)}const R4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const V4="__/auth/handler",B4="emulator/auth/handler",U4=encodeURIComponent("fac");function sN(t,e,n,r,i,o){return nv.apply(this,arguments)}function nv(){return(nv=g(function*(t,e,n,r,i,o){I(t.config.authDomain,t,"auth-domain-config-required"),I(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qr,eventId:i};if(e instanceof hr){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Ep(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof iq){const l=e.getScopes().filter(d=>""!==d);l.length>0&&(s.scopes=l.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=yield t._getAppCheckToken(),u=c?`#${U4}=${encodeURIComponent(c)}`:"";return`${function H4({config:t}){return t.emulator?n_(t,B4):`https://${t.authDomain}/${V4}`}(t)}?${Ms(a).slice(1)}${u}`})).apply(this,arguments)}const rv="webStorageSupport",j4=class $4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GM,this._completeRedirectFn=eN,this._overrideRedirectResult=u4}_openPopup(e,n,r,i){var o=this;return g(function*(){var s;lr(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield sN(e,n,r,Ls(),i);return function L4(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},R4),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Ve().toLowerCase();n&&(a=EM(u)?"_blank":n),vM(u)&&(e=e||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(function M6(t=Ve()){var e;return qu(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function F4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new oN(null);const d=window.open(e||"",a,l);I(d,t,"popup-blocked");try{d.focus()}catch{}return new oN(d)}(e,a,Cy())})()}_openRedirect(e,n,r,i){var o=this;return g(function*(){return yield o._originValidation(e),function Rq(t){Ne().location.href=t}(yield sN(e,n,r,Ls(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(lr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return g(function*(){const r=yield function N4(t){return tv.apply(this,arguments)}(e),i=new p4(e);return r.register("authEvent",o=>(I(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rv,{type:rv},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[rv];void 0!==s&&n(!!s),It(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function v4(t){return ev.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TM()||g_()||qu()}};var uN="@firebase/auth";class W4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return g(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const K4=gA("authIdTokenMaxAge")||300;let dN=null;const Y4=t=>function(){var e=g(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>K4)return;const o=r?.token;dN!==o&&(dN=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function Q4(t=Cu()){const e=Gr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function B6(t,e){const n=Gr(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Eu(n.getOptions(),e??{}))return i;It(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:j4,persistence:[Uq,Sq,GM]}),r=gA("authTokenSyncURL");if(r){const o=Y4(r);(function vq(t,e,n){vt(t).beforeAuthStateChanged(e,n)})(n,o,()=>o(n.currentUser)),function yq(t,e,n,r){vt(t).onIdTokenChanged(e,n,r)}(n,s=>o(s))}const i=hA("auth");return i&&function H6(t,e,n){const r=Ue(t);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=xM(e),{host:s,port:a}=function $6(t){const e=xM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:OM(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:OM(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function j6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}!function G4(t){st(new et("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;I(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bM(t)},u=new V6(r,i,o,c);return function U6(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Wn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),st(new et("auth-internal",e=>{const n=Ue(e.getProvider("auth").getImmediate());return new W4(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_e(uN,"0.23.2",function z4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),_e(uN,"0.23.2","esm2017")}("Browser");class ov{constructor(e){return e}}class hN{constructor(){return ku("auth")}}const sv=new M("angularfire2.auth-instances");function J4(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new ov(r)}}const X4={provide:hN,deps:[[new Ze,sv]]},e5={provide:ov,useFactory:function Z4(t,e){const n=Pu("auth",t,e);return n&&new ov(n)},deps:[[new Ze,sv],ei]};let t5=(()=>{class t{constructor(){_e("angularfire",ks.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=Xt({providers:[e5,X4]}),t})();function n5(t,...e){return{ngModule:t5,providers:[{provide:sv,useFactory:J4(t),multi:!0,deps:[de,jt,xu,Ou,[new Ze,Jm],...e]}]}}const r5=lo(Q4,!0),pN="@firebase/database";let av="";class o5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ze(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:As(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class s5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return Fn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mN=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new o5(e)}}catch{}return new s5},ii=mN("localStorage"),cv=mN("sessionStorage"),mo=new so("@firebase/database"),_N=function(){let t=1;return function(){return t++}}(),yN=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,w(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new $j;n.update(e);const r=n.digest();return pu.encodeByteArray(r)},qs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=qs.apply(null,r):e+="object"==typeof r?ze(r):r,e+=" "}return e};let oi=null,vN=!0;const He=function(...t){if(!0===vN&&(vN=!1,null===oi&&!0===cv.get("logging_enabled")&&function(t,e){w(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(mo.logLevel=V.VERBOSE,oi=mo.log.bind(mo),e&&cv.set("logging_enabled",!0)):"function"==typeof t?oi=t:(oi=null,cv.remove("logging_enabled"))}(!0)),oi){const e=qs.apply(null,t);oi(e)}},Ks=function(t){return function(...e){He(t,...e)}},uv=function(...t){const e="FIREBASE INTERNAL ERROR: "+qs(...t);mo.error(e)},yn=function(...t){const e=`FIREBASE FATAL ERROR: ${qs(...t)}`;throw mo.error(e),new Error(e)},tt=function(...t){const e="FIREBASE WARNING: "+qs(...t);mo.warn(e)},sl=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},pr="[MIN_NAME]",Gn="[MAX_NAME]",si=function(t,e){if(t===e)return 0;if(t===pr||e===Gn)return-1;if(e===pr||t===Gn)return 1;{const n=DN(t),r=DN(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},u5=function(t,e){return t===e?0:t<e?-1:1},Ys=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ze(e))},lv=function(t){if("object"!=typeof t||null===t)return ze(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=ze(e[r]),n+=":",n+=lv(t[e[r]]);return n+="}",n},IN=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function $e(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const wN=function(t){w(!sl(t),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===t?(o=0,s=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(t/Math.pow(2,-1074))));const u=[];for(c=52;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const l=u.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(l.substr(c,8),2).toString(16);1===f.length&&(f="0"+f),d+=f}return d.toLowerCase()},h5=new RegExp("^-?(0*)\\d{1,10}$"),DN=function(t){if(h5.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},_o=function(t){try{t()}catch(e){setTimeout(()=>{throw tt("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Qs=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class _5{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class y5{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(He("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(e)}}let Zs=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const AN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RN="websocket",PN="long_polling";class fv{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ii.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ii.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function kN(t,e,n){let r;if(w("string"==typeof e,"typeof type must == string"),w("object"==typeof n,"typeof params must == object"),e===RN)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==PN)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function v5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return $e(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class E5{constructor(){this.counters_={}}incrementCounter(e,n=1){Fn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Sj(this.counters_)}}const hv={},pv={};function gv(t){const e=t.toString();return hv[e]||(hv[e]=new E5),hv[e]}class w5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&_o(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class gr{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ks(e),this.stats_=gv(n),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),kN(n,PN,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new w5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mv((...o)=>{const[s,a,c,u,l]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&AN.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gr.forceAllow_=!0}static forceDisallow(){gr.forceDisallow_=!0}static isAvailable(){return!(!gr.forceAllow_&&(gr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=dA(n),i=IN(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ze(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class mv{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=_N(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=mv.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){He("frame writing exception"),a.stack&&He(a.stack),He(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||He("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{He("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let cl=null;typeof MozWebSocket<"u"?cl=MozWebSocket:typeof WebSocket<"u"&&(cl=WebSocket);let yo=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ks(this.connId),this.stats_=gv(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return typeof location<"u"&&location.hostname&&AN.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),kN(n,RN,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ii.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new cl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==cl&&!t.forceDisallow_}static previouslyFailed(){return ii.isInMemoryStorage||!0===ii.get("previous_websocket_failure")}markConnectionHealthy(){ii.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=As(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(w(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=ze(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=IN(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),UN=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[gr,yo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=yo&&yo.isAvailable();let i=r&&!yo.previouslyFailed();if(n.webSocketOnly&&(r||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yo];else{const o=this.transports_=[];for(const s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class qN{constructor(e,n,r,i,o,s,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ks("c:"+this.id+":"),this.transportManager_=new UN(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Qs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ys("t",e),r=Ys("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ys("t",e),r=Ys("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ys("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?uv("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uv("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Qs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ii.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class KN{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class YN{constructor(e){this.allowedEvents_=e,this.listeners_={},w(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){w(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class ul extends YN{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_p()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ul}getInitialEvent(e){return w("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class te{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function Z(){return new te("")}function j(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function mr(t){return t.pieces_.length-t.pieceNum_}function ie(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new te(t.pieces_,e)}function yv(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Js(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function JN(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new te(e,0)}function fe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof te)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new te(n,0)}function W(t){return t.pieceNum_>=t.pieces_.length}function ct(t,e){const n=j(t),r=j(e);if(null===n)return e;if(n===r)return ct(ie(t),ie(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function vv(t,e){if(mr(t)!==mr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Vt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(mr(t)>mr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class z5{constructor(e,n){this.errorPrefix_=n,this.parts_=Js(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Iu(this.parts_[r]);XN(this)}}function XN(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ai(t))}function ai(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class Ev extends YN{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ev}getInitialEvent(e){return w("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Xs=1e3;let dl,ci=(()=>{class t extends KN{constructor(n,r,i,o,s,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=Ks("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ev.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&ul.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(ze(s)),w(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new Hr,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),w(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),w(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,c=>{const u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),"ok"!==l&&this.removeListen_(i,o),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&Fn(n,"w")){const i=io(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=yu(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=yu(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),w(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ze(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):uv("Unrecognized action received from server: "+ze(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){w(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return g(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let c=!1,u=null;const l=function(){u?u.close():(c=!0,o())};n.realtime_={close:l,sendRequest:function(h){w(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(h)}};const f=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[h,p]=yield Promise.all([n.authTokenProvider_.getToken(f),n.appCheckTokenProvider_.getToken(f)]);c?He("getToken() completed but was canceled"):(He("getToken() completed. Creating connection."),n.authToken_=h&&h.accessToken,n.appCheckToken_=p&&p.token,u=new qN(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,m=>{tt(m+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(h){n.log_("Failed to get token: "+h),c||(n.repoInfo_.nodeAdmin&&tt(h),l())}}})()}interrupt(n){He("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){He("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ep(this.interruptReasons_)&&(this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>lv(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new te(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){He("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){He("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+av.replace(/\./g,"-")]=1,_p()?n["framework.cordova"]=1:mA()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=ul.getInstance().currentlyOnline();return Ep(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new z(e,n)}}class ll{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new z(pr,e),i=new z(pr,n);return 0!==this.compare(r,i)}minPost(){return z.MIN}}class nR extends ll{static get __EMPTY_NODE(){return dl}static set __EMPTY_NODE(e){dl=e}compare(e,n){return si(e.name,n.name)}isDefinedOn(e){throw ro("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return z.MIN}maxPost(){return new z(Gn,dl)}makePost(e,n){return w("string"==typeof e,"KeyIndex indexValue must always be a string."),new z(e,dl)}toString(){return".key"}}const vn=new nR;class fl{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let wv,Qt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??wt.EMPTY_NODE,this.right=s??wt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return wt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return wt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class wt{constructor(e,n=wt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Qt.BLACK,null,null))}remove(e){return new wt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fl(this.root_,null,this.comparator_,!0,e)}}function X5(t,e){return si(t.name,e.name)}function Iv(t,e){return si(t,e)}wt.EMPTY_NODE=new class J5{copy(e,n,r,i,o){return this}insert(e,n,r){return new Qt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rR=function(t){return"number"==typeof t?"number:"+wN(t):"string:"+t},iR=function(t){if(t.isLeafNode()){const e=t.val();w("string"==typeof e||"number"==typeof e||"object"==typeof e&&Fn(e,".sv"),"Priority must be a string or number.")}else w(t===wv||t.isEmpty(),"priority of unexpected type.");w(t===wv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oR,sR,aR,vo=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,w(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iR(this.priorityNode_)}static set __childrenNodeConstructor(n){oR=n}static get __childrenNodeConstructor(){return oR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:".priority"===j(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=j(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(w(".priority"!==i||1===mr(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ie(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+rR(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?wN(this.value_):this.value_,this.lazyHash_=yN(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(w(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return w(o>=0,"Unknown leaf type: "+r),w(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const ae=new class r7 extends ll{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?si(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(Gn,new vo("[PRIORITY-POST]",aR))}makePost(e,n){const r=sR(e);return new z(n,new vo("[PRIORITY-POST]",r))}toString(){return".priority"}},i7=Math.log(2);class o7{constructor(e){this.count=parseInt(Math.log(e+1)/i7,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hl=function(t,e,n,r){t.sort(e);const i=function(c,u){const l=u-c;let d,f;if(0===l)return null;if(1===l)return d=t[c],f=n?n(d):d,new Qt(f,d.node,Qt.BLACK,null,null);{const h=parseInt(l/2,10)+c,p=i(c,h),m=i(h+1,u);return d=t[h],f=n?n(d):d,new Qt(f,d.node,Qt.BLACK,p,m)}},a=function(c){let u=null,l=null,d=t.length;const f=function(p,m){const y=d-p,v=d;d-=p;const _=i(y+1,v),T=t[y],S=n?n(T):T;h(new Qt(S,T.node,m,null,_))},h=function(p){u?(u.left=p,u=p):(l=p,u=p)};for(let p=0;p<c.count;++p){const m=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));m?f(y,Qt.BLACK):(f(y,Qt.BLACK),f(y,Qt.RED))}return l}(new o7(t.length));return new wt(r||e,a)};let Dv;const Eo={};class qn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return w(Eo&&ae,"ChildrenNode.ts has not been loaded"),Dv=Dv||new qn({".priority":Eo},{".priority":ae}),Dv}get(e){const n=io(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wt?n:null}hasIndex(e){return Fn(this.indexSet_,e.toString())}addIndex(e,n){w(e!==vn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(z.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?hl(r,e.getCompare()):Eo;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const l=Object.assign({},this.indexes_);return l[c]=a,new qn(l,u)}addToIndexes(e,n){const r=vu(this.indexes_,(i,o)=>{const s=io(this.indexSet_,o);if(w(s,"Missing index implementation for "+o),i===Eo){if(s.isDefinedOn(e.node)){const a=[],c=n.getIterator(z.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),hl(a,s.getCompare())}return Eo}{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new z(e.name,a))),c.insert(e,e.node)}});return new qn(r,this.indexSet_)}removeFromIndexes(e,n){const r=vu(this.indexes_,i=>{if(i===Eo)return i;{const o=n.get(e.name);return o?i.remove(new z(e.name,o)):i}});return new qn(r,this.indexSet_)}}let ea,B=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iR(this.priorityNode_),this.children_.isEmpty()&&w(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ea||(ea=new t(new wt(Iv),null,qn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ea}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?ea:r}}getChild(n){const r=j(n);return null===r?this:this.getImmediateChild(r).getChild(ie(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(w(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new z(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?ea:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){const i=j(n);if(null===i)return r;{w(".priority"!==j(n)||1===mr(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(ie(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(ae,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+rR(this.getPriority().val())+":"),this.forEachChild(ae,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":yN(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new z(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new z(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new z(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,z.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,z.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ta?-1:0}withIndex(n){if(n===vn||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===vn||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ae),o=r.getIterator(ae);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===vn?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const ta=new class s7 extends B{constructor(){super(new wt(Iv),B.EMPTY_NODE,qn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return B.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(z,{MIN:{value:new z(pr,B.EMPTY_NODE)},MAX:{value:new z(Gn,ta)}}),nR.__EMPTY_NODE=B.EMPTY_NODE,vo.__childrenNodeConstructor=B,function e7(t){wv=t}(ta),function n7(t){aR=t}(ta);const a7=!0;function ve(t,e=null){if(null===t)return B.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),w(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new vo(t,ve(e));if(t instanceof Array||!a7){let n=B.EMPTY_NODE;return $e(t,(r,i)=>{if(Fn(t,r)&&"."!==r.substring(0,1)){const o=ve(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ve(e))}{const n=[];let r=!1;if($e(t,(s,a)=>{if("."!==s.substring(0,1)){const c=ve(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new z(s,c)))}}),0===n.length)return B.EMPTY_NODE;const o=hl(n,X5,s=>s.name,Iv);if(r){const s=hl(n,ae.getCompare());return new B(o,ve(e),new qn({".priority":s},{".priority":ae}))}return new B(o,ve(e),qn.Default)}}!function t7(t){sR=t}(ve);class Cv extends ll{constructor(e){super(),this.indexPath_=e,w(!W(e)&&".priority"!==j(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?si(e.name,n.name):o}makePost(e,n){const r=ve(e),i=B.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,i)}maxPost(){const e=B.EMPTY_NODE.updateChild(this.indexPath_,ta);return new z(Gn,e)}toString(){return Js(this.indexPath_,0).join("/")}}const Tv=new class c7 extends ll{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?si(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(e,n){const r=ve(e);return new z(n,r)}toString(){return".value"}};function ra(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class Sv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ae}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return w(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return w(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pr}hasEnd(){return this.endSet_}getIndexEndValue(){return w(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return w(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return w(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ae}copy(){const e=new Sv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uR(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ae?n="$priority":t.index_===Tv?n="$value":t.index_===vn?n="$key":(w(t.index_ instanceof Cv,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ze(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ze(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ze(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ze(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ze(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==ae&&(e.i=t.index_.toString()),e}class gl extends KN{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ks("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(w(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=gl.getListenId_(e,r),a={};this.listens_[s]=a;const c=uR(e._queryParams);this.restRequest_(o+".json",c,(u,l)=>{let d=l;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(o,d,!1,r),io(this.listens_,s)===a){let f;f=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(f,null)}})}unlisten(e,n){const r=gl.getListenId_(e,n);delete this.listens_[r]}get(e){const n=uR(e._queryParams),r=e._path.toString(),i=new Hr;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ms(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=As(a.responseText)}catch{tt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&tt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class m7{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function ml(){return{value:null,children:new Map}}function wo(t,e,n){if(W(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=j(e);t.children.has(r)||t.children.set(r,ml()),wo(t.children.get(r),e=ie(e),n)}}function Rv(t,e,n){null!==t.value?n(e,t.value):function _7(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{Rv(i,new te(e.toString()+"/"+r),n)})}class y7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&$e(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class I7{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new y7(e);const r=1e4+2e4*Math.random();Qs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;$e(e,(i,o)=>{o>0&&Fn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Qs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Re=(()=>((Re=Re||{})[Re.OVERWRITE=0]="OVERWRITE",Re[Re.MERGE=1]="MERGE",Re[Re.ACK_USER_WRITE=2]="ACK_USER_WRITE",Re[Re.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Re))();function xv(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class _l{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Re.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(W(this.path)){if(null!=this.affectedTree.value)return w(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new te(e));return new _l(Z(),n,this.revert)}}return w(j(this.path)===e,"operationForChild called for unrelated child."),new _l(ie(this.path),this.affectedTree,this.revert)}}class ui{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Re.OVERWRITE}operationForChild(e){return W(this.path)?new ui(this.source,Z(),this.snap.getImmediateChild(e)):new ui(this.source,ie(this.path),this.snap)}}class Do{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Re.MERGE}operationForChild(e){if(W(this.path)){const n=this.children.subtree(new te(e));return n.isEmpty()?null:n.value?new ui(this.source,Z(),n.value):new Do(this.source,Z(),n)}return w(j(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Do(this.source,ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _r{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W(e))return this.isFullyInitialized()&&!this.filtered_;const n=j(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function sa(t,e,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,c)=>function T7(t,e,n){if(null==e.childName||null==n.childName)throw ro("Should only compare child_ events.");const r=new z(e.childName,e.snapshotNode),i=new z(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,c)),s.forEach(a=>{const c=function C7(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function yl(t,e){return{eventCache:t,serverCache:e}}function aa(t,e,n,r){return yl(new _r(e,n,r),t.serverCache)}function fR(t,e,n,r){return yl(t.eventCache,new _r(e,n,r))}function vl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function li(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Ov;class ce{constructor(e,n=(()=>(Ov||(Ov=new wt(u5)),Ov))()){this.value=e,this.children=n}static fromObject(e){let n=new ce(null);return $e(e,(r,i)=>{n=n.set(new te(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:Z(),value:this.value};if(W(e))return null;{const r=j(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(ie(e),n);return null!=o?{path:fe(new te(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(W(e))return this;{const n=j(e),r=this.children.get(n);return null!==r?r.subtree(ie(e)):new ce(null)}}set(e,n){if(W(e))return new ce(n,this.children);{const r=j(e),o=(this.children.get(r)||new ce(null)).set(ie(e),n),s=this.children.insert(r,o);return new ce(this.value,s)}}remove(e){if(W(e))return this.children.isEmpty()?new ce(null):new ce(null,this.children);{const n=j(e),r=this.children.get(n);if(r){const i=r.remove(ie(e));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new ce(null):new ce(this.value,o)}return this}}get(e){if(W(e))return this.value;{const n=j(e),r=this.children.get(n);return r?r.get(ie(e)):null}}setTree(e,n){if(W(e))return n;{const r=j(e),o=(this.children.get(r)||new ce(null)).setTree(ie(e),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new ce(this.value,s)}}fold(e){return this.fold_(Z(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(fe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Z(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(W(e))return null;{const o=j(e),s=this.children.get(o);return s?s.findOnPath_(ie(e),fe(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Z(),n)}foreachOnPath_(e,n,r){if(W(e))return this;{this.value&&r(n,this.value);const i=j(e),o=this.children.get(i);return o?o.foreachOnPath_(ie(e),fe(n,i),r):new ce(null)}}foreach(e){this.foreach_(Z(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(fe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class Zt{constructor(e){this.writeTree_=e}static empty(){return new Zt(new ce(null))}}function ca(t,e,n){if(W(e))return new Zt(new ce(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=ct(i,e);return o=o.updateChild(s,n),new Zt(t.writeTree_.set(i,o))}{const i=new ce(n),o=t.writeTree_.setTree(e,i);return new Zt(o)}}}function Lv(t,e,n){let r=t;return $e(n,(i,o)=>{r=ca(r,fe(e,i),o)}),r}function hR(t,e){if(W(e))return Zt.empty();{const n=t.writeTree_.setTree(e,new ce(null));return new Zt(n)}}function Fv(t,e){return null!=di(t,e)}function di(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(ct(n.path,e)):null}function pR(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ae,(r,i)=>{e.push(new z(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new z(r,i.value))}),e}function yr(t,e){if(W(e))return t;{const n=di(t,e);return new Zt(null!=n?new ce(n):t.writeTree_.subtree(e))}}function Vv(t){return t.writeTree_.isEmpty()}function Co(t,e){return gR(Z(),t.writeTree_,e)}function gR(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?(w(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=gR(fe(t,i),o,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(fe(t,".priority"),r)),n}}function El(t,e){return ER(e,t)}function R7(t,e){if(t.snap)return Vt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Vt(fe(t.path,n),e))return!0;return!1}function k7(t){return t.visible}function mR(t,e,n){let r=Zt.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)Vt(n,s)?(a=ct(n,s),r=ca(r,a,o.snap)):Vt(s,n)&&(a=ct(s,n),r=ca(r,Z(),o.snap.getChild(a)));else{if(!o.children)throw ro("WriteRecord should have .snap or .children");if(Vt(n,s))a=ct(n,s),r=Lv(r,a,o.children);else if(Vt(s,n))if(a=ct(s,n),W(a))r=Lv(r,Z(),o.children);else{const c=io(o.children,j(a));if(c){const u=c.getChild(ie(a));r=ca(r,Z(),u)}}}}}return r}function _R(t,e,n,r,i){if(r||i){const o=yr(t.visibleWrites,e);return!i&&Vv(o)?n:i||null!=n||Fv(o,Z())?Co(mR(t.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Vt(u.path,e)||Vt(e,u.path))},e),n||B.EMPTY_NODE):null}{const o=di(t.visibleWrites,e);if(null!=o)return o;{const s=yr(t.visibleWrites,e);return Vv(s)?n:null!=n||Fv(s,Z())?Co(s,n||B.EMPTY_NODE):null}}}function Il(t,e,n,r){return _R(t.writeTree,t.treePath,e,n,r)}function Bv(t,e){return function x7(t,e,n){let r=B.EMPTY_NODE;const i=di(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ae,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=yr(t.visibleWrites,e);return n.forEachChild(ae,(s,a)=>{const c=Co(yr(o,new te(s)),a);r=r.updateImmediateChild(s,c)}),pR(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return pR(yr(t.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(t.writeTree,t.treePath,e)}function yR(t,e,n,r){return function O7(t,e,n,r,i){w(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=fe(e,n);if(Fv(t.visibleWrites,o))return null;{const s=yr(t.visibleWrites,o);return Vv(s)?i.getChild(n):Co(s,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function wl(t,e){return function F7(t,e){return di(t.visibleWrites,e)}(t.writeTree,fe(t.treePath,e))}function Uv(t,e,n){return function L7(t,e,n,r){const i=fe(e,n),o=di(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Co(yr(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function vR(t,e){return ER(fe(t.treePath,e),t.writeTree)}function ER(t,e){return{treePath:t,writeTree:e}}class H7{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;w("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),w(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,ra(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,function na(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,function Io(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw ro("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ra(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const IR=new class $7{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class Hv{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new _r(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Uv(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:li(this.viewCache_),o=function U7(t,e,n,r,i,o){return function V7(t,e,n,r,i,o,s){let a;const c=yr(t.visibleWrites,e),u=di(c,Z());if(null!=u)a=u;else{if(null==n)return[];a=Co(c,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let h=f.getNext();for(;h&&l.length<i;)0!==d(h,r)&&l.push(h),h=f.getNext();return l}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,i,n,1,r,e);return 0===o.length?null:o[0]}}function wR(t,e,n,r,i,o){const s=e.eventCache;if(null!=wl(r,n))return e;{let a,c;if(W(n))if(w(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=li(e),d=Bv(r,u instanceof B?u:B.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const u=Il(r,li(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{const u=j(n);if(".priority"===u){w(1===mr(n),"Can't have a priority with additional path components");const l=s.getNode();c=e.serverCache.getNode();const d=yR(r,n,l,c);a=null!=d?t.filter.updatePriority(l,d):s.getNode()}else{const l=ie(n);let d;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();const f=yR(r,n,s.getNode(),c);d=null!=f?s.getNode().getImmediateChild(u).updateChild(l,f):s.getNode().getImmediateChild(u)}else d=Uv(r,u,e.serverCache);a=null!=d?t.filter.updateChild(s.getNode(),u,d,l,i,o):s.getNode()}}return aa(e,a,s.isFullyInitialized()||W(n),t.filter.filtersNodes())}}function Dl(t,e,n,r,i,o,s,a){const c=e.serverCache;let u;const l=s?t.filter:t.filter.getIndexedFilter();if(W(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{const h=j(n);if(!c.isCompleteForPath(n)&&mr(n)>1)return e;const p=ie(n),y=c.getNode().getImmediateChild(h).updateChild(p,r);u=".priority"===h?l.updatePriority(c.getNode(),y):l.updateChild(c.getNode(),h,y,p,IR,null)}const d=fR(e,u,c.isFullyInitialized()||W(n),l.filtersNodes());return wR(t,d,n,i,new Hv(i,d,o),a)}function $v(t,e,n,r,i,o,s){const a=e.eventCache;let c,u;const l=new Hv(i,e,o);if(W(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=aa(e,u,!0,t.filter.filtersNodes());else{const d=j(n);if(".priority"===d)u=t.filter.updatePriority(e.eventCache.getNode(),r),c=aa(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=ie(n),h=a.getNode().getImmediateChild(d);let p;if(W(f))p=r;else{const m=l.getCompleteChild(d);p=null!=m?".priority"===yv(f)&&m.getChild(JN(f)).isEmpty()?m:m.updateChild(f,r):B.EMPTY_NODE}c=h.equals(p)?e:aa(e,t.filter.updateChild(a.getNode(),d,p,f,l,s),a.isFullyInitialized(),t.filter.filtersNodes())}}return c}function DR(t,e){return t.eventCache.isCompleteForChild(e)}function CR(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function jv(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,c=e;u=W(n)?r:new ce(null).setTree(n,r);const l=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(l.hasChild(d)){const p=CR(0,e.serverCache.getNode().getImmediateChild(d),f);c=Dl(t,c,new te(d),p,i,o,s,a)}}),u.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&null===f.value;if(!l.hasChild(d)&&!h){const m=CR(0,e.serverCache.getNode().getImmediateChild(d),f);c=Dl(t,c,new te(d),m,i,o,s,a)}}),c}function eK(t,e){const n=li(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!W(e)&&!n.getImmediateChild(j(e)).isEmpty())?n.getChild(e):null}function SR(t,e,n,r){e.type===Re.MERGE&&null!==e.source.queryId&&(w(li(t.viewCache_),"We should always have a full cache before handling merges"),w(vl(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=function z7(t,e,n,r,i){const o=new H7;let s,a;if(n.type===Re.OVERWRITE){const u=n;u.source.fromUser?s=$v(t,e,u.path,u.snap,r,i,o):(w(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!W(u.path),s=Dl(t,e,u.path,u.snap,r,i,a,o))}else if(n.type===Re.MERGE){const u=n;u.source.fromUser?s=function q7(t,e,n,r,i,o,s){let a=e;return r.foreach((c,u)=>{const l=fe(n,c);DR(e,j(l))&&(a=$v(t,a,l,u,i,o,s))}),r.foreach((c,u)=>{const l=fe(n,c);DR(e,j(l))||(a=$v(t,a,l,u,i,o,s))}),a}(t,e,u.path,u.children,r,i,o):(w(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=jv(t,e,u.path,u.children,r,i,a,o))}else if(n.type===Re.ACK_USER_WRITE){const u=n;s=u.revert?function Q7(t,e,n,r,i,o){let s;if(null!=wl(r,n))return e;{const a=new Hv(r,e,i),c=e.eventCache.getNode();let u;if(W(n)||".priority"===j(n)){let l;if(e.serverCache.isFullyInitialized())l=Il(r,li(e));else{const d=e.serverCache.getNode();w(d instanceof B,"serverChildren would be complete if leaf node"),l=Bv(r,d)}u=t.filter.updateFullNode(c,l,o)}else{const l=j(n);let d=Uv(r,l,e.serverCache);null==d&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),u=null!=d?t.filter.updateChild(c,l,d,ie(n),a,o):e.eventCache.getNode().hasChild(l)?t.filter.updateChild(c,l,B.EMPTY_NODE,ie(n),a,o):c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Il(r,li(e)),s.isLeafNode()&&(u=t.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=wl(r,Z()),aa(e,u,s,t.filter.filtersNodes())}}(t,e,u.path,r,i,o):function K7(t,e,n,r,i,o,s){if(null!=wl(i,n))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Dl(t,e,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let u=new ce(null);return c.getNode().forEachChild(vn,(l,d)=>{u=u.set(new te(l),d)}),jv(t,e,n,u,i,o,a,s)}return e}{let u=new ce(null);return r.foreach((l,d)=>{const f=fe(n,l);c.isCompleteForPath(f)&&(u=u.set(l,c.getNode().getChild(f)))}),jv(t,e,n,u,i,o,a,s)}}(t,e,u.path,u.affectedTree,r,i,o)}else{if(n.type!==Re.LISTEN_COMPLETE)throw ro("Unknown operation type: "+n.type);s=function Y7(t,e,n,r,i){const o=e.serverCache;return wR(t,fR(e,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered()),n,r,IR,i)}(t,e,n.path,r,o)}const c=o.getChanges();return function G7(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=vl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(function cR(t){return{type:"value",snapshotNode:t}}(vl(e)))}}(e,s,c),{viewCache:s,changes:c}}(t.processor_,i,e,n,r);return function W7(t,e){w(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),w(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,o.viewCache),w(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,function AR(t,e,n,r){return function D7(t,e,n,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function u7(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(s.childName,s.snapshotNode))}),sa(t,i,"child_removed",e,r,n),sa(t,i,"child_added",e,r,n),sa(t,i,"child_moved",o,r,n),sa(t,i,"child_changed",e,r,n),sa(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}(t,o.changes,o.viewCache.eventCache.getNode(),null)}let Cl,bl;function Wv(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return w(null!=o,"SyncTree gave us an op for an invalid query."),SR(o,e,n,r)}{let o=[];for(const s of t.views.values())o=o.concat(SR(s,e,n,r));return o}}function vr(t,e){let n=null;for(const r of t.views.values())n=n||eK(r,e);return n}class xR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ce(null),this.pendingWriteTree_=function B7(){return{visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zv(t,e,n,r,i){return function S7(t,e,n,r,i){w(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ca(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?To(t,new ui({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Ir(t,e,n=!1){const r=function M7(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function N7(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);w(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=n&&R7(a,r.path)?i=!1:Vt(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function P7(t){t.visibleWrites=mR(t.allWrites,k7,Z()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=hR(t.visibleWrites,r.path):$e(r.children,c=>{t.visibleWrites=hR(t.visibleWrites,fe(r.path,c))}),!0))}(t.pendingWriteTree_,e)){let o=new ce(null);return null!=r.snap?o=o.set(Z(),!0):$e(r.children,s=>{o=o.set(new te(s),!0)}),To(t,new _l(r.path,o,n))}return[]}function ua(t,e,n){return To(t,new ui({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Al(t,e,n){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const u=vr(a,ct(s,e));if(u)return u});return _R(i,e,o,n,!0)}function To(t,e){return LR(e,t.syncPointTree_,null,El(t.pendingWriteTree_,Z()))}function LR(t,e,n,r){if(W(t.path))return FR(t,e,n,r);{const i=e.get(Z());null==n&&null!=i&&(n=vr(i,Z()));let o=[];const s=j(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){const u=n?n.getImmediateChild(s):null,l=vR(r,s);o=o.concat(LR(a,c,u,l))}return i&&(o=o.concat(Wv(i,t,r,n))),o}}function FR(t,e,n,r){const i=e.get(Z());null==n&&null!=i&&(n=vr(i,Z()));let o=[];return e.children.inorderTraversal((s,a)=>{const c=n?n.getImmediateChild(s):null,u=vR(r,s),l=t.operationForChild(s);l&&(o=o.concat(FR(l,a,c,u)))}),i&&(o=o.concat(Wv(i,t,r,n))),o}function qv(t,e){return t.tagToQueryMap.get(e)}function Kv(t){const e=t.indexOf("$");return w(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new te(t.substr(0,e))}}function Yv(t,e,n){const r=t.syncPointTree_.get(e);return w(r,"Missing sync point for query tag that we're tracking"),Wv(r,n,El(t.pendingWriteTree_,e),null)}class Qv{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Qv(n)}node(){return this.node_}}class Zv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=fe(this.path_,e);return new Zv(this.syncTree_,n)}node(){return Al(this.syncTree_,this.path_)}}const IK=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},BR=function(t,e,n){return t&&"object"==typeof t?(w(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?wK(t[".sv"],e,n):"object"==typeof t[".sv"]?DK(t[".sv"],e):void w(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},wK=function(t,e,n){if("timestamp"===t)return n.timestamp;w(!1,"Unexpected server value: "+t)},DK=function(t,e,n){t.hasOwnProperty("increment")||w(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&w(!1,"Unexpected increment value: "+r);const i=e.node();if(w(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},UR=function(t,e,n,r){return Xv(e,new Zv(n,t),r)},Jv=function(t,e,n){return Xv(t,new Qv(e),n)};function Xv(t,e,n){const r=t.getPriority().val(),i=BR(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,a=BR(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new vo(a,ve(i)):t}{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new vo(i))),s.forEachChild(ae,(a,c)=>{const u=Xv(c,e.getImmediateChild(a),n);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}class eE{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Nl(t,e){let n=e instanceof te?e:new te(e),r=t,i=j(n);for(;null!==i;){const o=io(r.node.children,i)||{children:{},childCount:0};r=new eE(i,r,o),n=ie(n),i=j(n)}return r}function fi(t){return t.node.value}function tE(t,e){t.node.value=e,nE(t)}function HR(t){return t.node.childCount>0}function Rl(t,e){$e(t.node.children,(n,r)=>{e(new eE(n,t,r))})}function $R(t,e,n,r){n&&!r&&e(t),Rl(t,i=>{$R(i,e,!0,r)}),n&&r&&e(t)}function fa(t){return new te(null===t.parent?t.name:fa(t.parent)+"/"+t.name)}function nE(t){null!==t.parent&&function bK(t,e,n){const r=function CK(t){return void 0===fi(t)&&!HR(t)}(n),i=Fn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,nE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,nE(t))}(t.parent,t.name,t)}const SK=/[\[\].#$\/\u0000-\u001F\u007F]/,AK=/[\[\].#$\u0000-\u001F\u007F]/,rE=10485760,Pl=function(t){return"string"==typeof t&&0!==t.length&&!SK.test(t)},jR=function(t){return"string"==typeof t&&0!==t.length&&!AK.test(t)},pa=function(t,e,n){const r=n instanceof te?new z5(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+ai(r));if("function"==typeof e)throw new Error(t+"contains a function "+ai(r)+" with contents = "+e.toString());if(sl(e))throw new Error(t+"contains "+e.toString()+" "+ai(r));if("string"==typeof e&&e.length>rE/3&&Iu(e)>rE)throw new Error(t+"contains a string greater than "+rE+" utf8 bytes "+ai(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if($e(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!Pl(s)))throw new Error(t+" contains an invalid key ("+s+") "+ai(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function G5(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Iu(e),XN(t)})(r,s),pa(t,a,r),function q5(t){const e=t.parts_.pop();t.byteLength_-=Iu(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&o)throw new Error(t+' contains ".value" child '+ai(r)+" in addition to actual children.")}},oE=function(t,e,n,r){if(!(r&&void 0===n||jR(n)))throw new Error(oo(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},RK=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oE(t,e,n,r)};class PK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kl(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==n&&!vv(o,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Mt(t,e,n){kl(t,n),function qR(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(kK(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,r=>Vt(r,e)||Vt(e,r))}function kK(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();oi&&He("event: "+n.toString()),_o(r)}}}const xK=25;class OK{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ml(),this.transactionQueueTree_=new eE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YR(t){const n=t.infoData_.getNode(new te(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function ma(t){return IK({timestamp:YR(t)})}function QR(t,e,n,r,i){t.dataUpdateCount++;const o=new te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const c=vu(n,u=>ve(u));s=function gK(t,e,n,r){const i=qv(t,r);if(i){const o=Kv(i),s=o.path,a=o.queryId,c=ct(s,e),u=ce.fromObject(n);return Yv(t,s,new Do(xv(a),c,u))}return[]}(t.serverSyncTree_,o,c,i)}else{const c=ve(n);s=function OR(t,e,n,r){const i=qv(t,r);if(null!=i){const o=Kv(i),s=o.path,a=o.queryId,c=ct(s,e);return Yv(t,s,new ui(xv(a),c,n))}return[]}(t.serverSyncTree_,o,c,i)}else if(r){const c=vu(n,u=>ve(u));s=function fK(t,e,n){const r=ce.fromObject(n);return To(t,new Do({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{const c=ve(n);s=ua(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=So(t,o)),Mt(t.eventQueue_,a,s)}function ZR(t,e){sE(t,"connected",e),!1===e&&function UK(t){bo(t,"onDisconnectEvents");const e=ma(t),n=ml();Rv(t.onDisconnect_,Z(),(i,o)=>{const s=UR(i,o,t.serverSyncTree_,e);wo(n,i,s)});let r=[];Rv(n,Z(),(i,o)=>{r=r.concat(ua(t.serverSyncTree_,i,o));const s=lE(t,i);So(t,s)}),t.onDisconnect_=ml(),Mt(t.eventQueue_,Z(),r)}(t)}function sE(t,e,n){const r=new te("/.info/"+e),i=ve(n);t.infoData_.updateSnapshot(r,i);const o=ua(t.infoSyncTree_,r,i);Mt(t.eventQueue_,r,o)}function xl(t){return t.nextWriteId_++}function aE(t,e,n,r,i){bo(t,"set",{path:e.toString(),value:n,priority:r});const o=ma(t),s=ve(n,r),a=Al(t.serverSyncTree_,e),c=Jv(s,a,o),u=xl(t),l=zv(t.serverSyncTree_,e,c,u,!0);kl(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),(f,h)=>{const p="ok"===f;p||tt("set at "+e+" failed: "+f);const m=Ir(t.serverSyncTree_,u,!p);Mt(t.eventQueue_,e,m),function wr(t,e,n,r){e&&_o(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}(0,i,f,h)});const d=lE(t,e);So(t,d),Mt(t.eventQueue_,d,[])}function bo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),He(n,...e)}function uE(t,e,n){return Al(t.serverSyncTree_,e,n)||B.EMPTY_NODE}function Ol(t,e=t.transactionQueueTree_){if(e||Ll(t,e),fi(e)){const n=tP(t,e);w(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function qK(t,e,n){const r=n.map(u=>u.currentWriteId),i=uE(t,e,r);let o=i;const s=i.hash();for(let u=0;u<n.length;u++){const l=n[u];w(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=ct(e,l.path);o=o.updateChild(d,l.currentOutputSnapshotRaw)}const a=o.val(!0),c=e;t.server_.put(c.toString(),a,u=>{bo(t,"transaction put response",{path:c.toString(),status:u});let l=[];if("ok"===u){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,l=l.concat(Ir(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Ll(t,Nl(t.transactionQueueTree_,e)),Ol(t,t.transactionQueueTree_),Mt(t.eventQueue_,e,l);for(let f=0;f<d.length;f++)_o(d[f])}else{if("datastale"===u)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{tt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}So(t,e)}},s)}(t,fa(e),n)}else HR(e)&&Rl(e,n=>{Ol(t,n)})}function So(t,e){const n=eP(t,e),r=fa(n);return function KK(t,e,n){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=ct(n,c.path);let d,l=!1;if(w(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)l=!0,d=c.abortReason,i=i.concat(Ir(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=xK)l=!0,d="maxretry",i=i.concat(Ir(t.serverSyncTree_,c.currentWriteId,!0));else{const f=uE(t,c.path,s);c.currentInputSnapshot=f;const h=e[a].update(f.val());if(void 0!==h){pa("transaction failed: Data returned ",h,c.path);let p=ve(h);"object"==typeof h&&null!=h&&Fn(h,".priority")||(p=p.updatePriority(f.getPriority()));const y=c.currentWriteId,v=ma(t),_=Jv(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=_,c.currentWriteId=xl(t),s.splice(s.indexOf(y),1),i=i.concat(zv(t.serverSyncTree_,c.path,_,c.currentWriteId,c.applyLocally)),i=i.concat(Ir(t.serverSyncTree_,y,!0))}else l=!0,d="nodata",i=i.concat(Ir(t.serverSyncTree_,c.currentWriteId,!0))}Mt(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Ll(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)_o(r[a]);Ol(t,t.transactionQueueTree_)}(t,tP(t,n),r),r}function eP(t,e){let n,r=t.transactionQueueTree_;for(n=j(e);null!==n&&void 0===fi(r);)r=Nl(r,n),n=j(e=ie(e));return r}function tP(t,e){const n=[];return nP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function nP(t,e,n){const r=fi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Rl(e,i=>{nP(t,i,n)})}function Ll(t,e){const n=fi(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,tE(e,n.length>0?n:void 0)}Rl(e,r=>{Ll(t,r)})}function lE(t,e){const n=fa(eP(t,e)),r=Nl(t.transactionQueueTree_,e);return function TK(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{dE(t,i)}),dE(t,r),$R(r,i=>{dE(t,i)}),n}function dE(t,e){const n=fi(e);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(w(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(w(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Ir(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?tE(e,void 0):n.length=o+1,Mt(t.eventQueue_,fa(e),i);for(let s=0;s<r.length;s++)_o(r[s])}}const fE=function(t,e){const n=ZK(t),r=n.namespace;return"firebase.com"===n.domain&&yn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fv(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new te(n.pathString)}},ZK=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");-1===l&&(l=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=function YK(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(l,d)));const f=function QK(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tt(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(u+1),10)):u=e.length;const h=e.slice(0,u);if("localhost"===h.toLowerCase())n="localhost";else if(h.split(".").length<=2)n=h;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class Nt{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:yv(this._path)}get ref(){return new Jt(this._repo,this._path)}get _queryIdentifier(){const e=lR(this._queryParams),n=lv(e);return"{}"===n?"default":n}get _queryObject(){return lR(this._queryParams)}isEqual(e){if(!((e=vt(e))instanceof Nt))return!1;const n=this._repo===e._repo,r=vv(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function j5(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class Jt extends Nt{constructor(e,n){super(e,n,new Sv,!1)}get parent(){const e=JN(this._path);return null===e?null:new Jt(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function sP(t,e){return(t=vt(t))._checkNotDeleted("ref"),void 0!==e?function Ao(t,e){return null===j((t=vt(t))._path)?RK("child","path",e,!1):oE("child","path",e,!1),new Jt(t._repo,fe(t._path,e))}(t._root,e):t._root}function pE(t,e){(function(t,e){if(".info"===j(e))throw new Error(t+" failed = Can't modify data under /.info/")})("set",(t=vt(t))._path),function(t,e,n,r){r&&void 0===e||pa(oo(t,"value"),e,n)}("set",e,t._path,!1);const n=new Hr;return aE(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}(function rK(t){w(!Cl,"__referenceConstructor has already been defined"),Cl=t})(Jt),function cK(t){w(!bl,"__referenceConstructor has already been defined"),bl=t}(Jt);const gE={};function f9(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),He("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c,u,s=fE(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=fE(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const l=i&&c?new Zs(Zs.OWNER):new y5(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Pl(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jR(t)}(n))throw new Error(oo(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",s),W(s.path)||yn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function p9(t,e,n,r){let i=gE[e.name];i||(i={},gE[e.name]=i);let o=i[t.toURLString()];return o&&yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new OK(t,false,n,r),i[t.toURLString()]=o,o}(a,t,l,new _5(t.name,n));return new m9(d,t)}class m9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function LK(t,e,n){if(t.stats_=gv(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new gl(t.repoInfo_,(r,i,o,s)=>{QR(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ZR(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ze(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ci(t.repoInfo_,e,(r,i,o,s)=>{QR(t,r,i,o,s)},r=>{ZR(t,r)},r=>{!function FK(t,e){$e(e,(n,r)=>{sE(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function I5(t,e){const n=t.toString();return pv[n]||(pv[n]=e()),pv[n]}(t.repoInfo_,()=>new I7(t.stats_,t.server_)),t.infoData_=new m7,t.infoSyncTree_=new xR({startListening:(r,i,o,s)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ua(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),sE(t,"connected",!1),t.serverSyncTree_=new xR({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{const u=s(a,c);Mt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jt(this._repo,Z())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function h9(t,e){const n=gE[e];(!n||n[t.key]!==t)&&yn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function XR(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&yn("Cannot call "+e+" on a deleted database.")}}function _9(t=Cu(),e){const n=Gr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=(t=>{const e=hA("database");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();r&&function y9(t,e,n,r={}){(t=vt(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&yn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Zs(Zs.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:function xj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gu(JSON.stringify({alg:"none",type:"JWT"})),gu(JSON.stringify(s)),""].join(".")}(r.mockUserToken,t.app.options.projectId);o=new Zs(s)}!function d9(t,e,n,r){t.repoInfo_=new fv(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,o)}(n,...r)}return n}ci.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},ci.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function v9(t){(function i5(t){av=t})(qr),st(new et("database",(e,{instanceIdentifier:n})=>f9(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),_e(pN,"0.14.4",t),_e(pN,"0.14.4","esm2017")}();class Ul{constructor(e){return e}}const dP="database",mE=new M("angularfire2.database-instances");function C9(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Ul(r)}}const T9={provide:class w9{constructor(){return ku(dP)}},deps:[[new Ze,mE]]},b9={provide:Ul,useFactory:function D9(t,e){const n=Pu(dP,t,e);return n&&new Ul(n)},deps:[[new Ze,mE],ei]};let S9=(()=>{class t{constructor(){_e("angularfire",ks.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=Xt({providers:[b9,T9]}),t})();function A9(t,...e){return{ngModule:S9,providers:[{provide:mE,useFactory:C9(t),multi:!0,deps:[de,jt,xu,Ou,[new Ze,hN],[new Ze,Jm],...e]}]}}const M9=lo(_9,!0),N9=lo(sP,!0),R9=lo(pE,!0);let P9=(()=>{class t{constructor(){this.title="yourscope",this.database=ue(Ul)}addData(){const n=N9(this.database,"/test");let i=(new Date).getTime();R9(n,{currTime:i})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=dI({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[3,"click"]],template:function(n,r){1&n&&(Bc(0,"div")(1,"button",0),eh("click",function(){return r.addData()}),function oT(t,e=""){const n=E(),r=Y(),i=t+K,o=r.firstCreatePass?Hi(r,i,1,e,null):r.data[i],s=sT(r,n,o,e,t);n[i]=s,qa()&&fc(r,n,s,o),sn(o,!1)}(2,"Firebase"),Uc()())}}),t})();const k9_firebase={projectId:"yourscope-66bdb",appId:"1:342027727038:web:ce01e422157bfb01e0aeef",databaseURL:"https://yourscope-66bdb-default-rtdb.firebaseio.com",storageBucket:"yourscope-66bdb.appspot.com",apiKey:"AIzaSyDVpKBZOYpKp-hEt35-Zgm2MbRqE0FLU4Y",authDomain:"yourscope-66bdb.firebaseapp.com",messagingSenderId:"342027727038",measurementId:"G-X82QCQYMXW"};class _E{constructor(e){return e}}const fP="remote-config",yE=new M("angularfire2.remote-config-instances");function L9(t){return(e,n)=>{if(!Ru.sync())return null;const r=e.runOutsideAngular(()=>t(n));return new _E(r)}}const F9={provide:class x9{constructor(){return ku(fP)}},deps:[[new Ze,yE]]},V9={provide:_E,useFactory:function O9(t,e){if(!Ru.sync())return null;const n=Pu(fP,t,e);return n&&new _E(n)},deps:[[new Ze,yE],ei]};let B9=(()=>{class t{constructor(){_e("angularfire",ks.full,"rc")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t}),t.\u0275inj=Xt({providers:[V9,F9,{provide:jb,useValue:Ru.async,multi:!0}]}),t})();function U9(t,...e){return{ngModule:B9,providers:[{provide:yE,useFactory:L9(t),multi:!0,deps:[de,jt,xu,Ou,...e]}]}}const H9=lo(aG,!0);let $9=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Tn({type:t,bootstrap:[P9]}),t.\u0275inj=Xt({imports:[yj,I8(()=>w8(k9_firebase)),n5(()=>r5()),A9(()=>M9()),U9(()=>H9())]}),t})();mj().bootstrapModule($9).catch(t=>console.error(t))}},he=>{he(he.s=801)}]);